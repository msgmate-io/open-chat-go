import{j as h,r as _,c as Pn,d as zt,R as Ut}from"./chunk-BqilOtsp.js";import{c as le,f as Ln,D as Dn,b as _n,d as Me,e as rt,I as In,B as Se,a as An,i as Tn,g as jn,h as Mn,j as On,k as kn,l as $n}from"./chunk-oJMaQAaN.js";const Vn=Ln("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function gt({className:e,variant:t,...n}){return h.jsx("div",{className:le(Vn({variant:t}),e),...n})}function Hn({isOnline:e}){return e?h.jsx(gt,{className:"bg-transparent flex items-center content-center justify-center h-6 w-6 hover:bg-transparent",children:"ðŸŸ¢"}):h.jsx(gt,{className:"bg-transparent flex items-center content-center justify-center h-6 w-6 hover:bg-transparent",children:"ðŸ”´"})}function Fn({unreadCount:e}){return e>0?h.jsx(gt,{className:"bg-transparent flex flex-row items-center content-center justify-center text-black h-6 w-10 px-0 hover:bg-transparent",children:`${e}xðŸ“®`}):h.jsx(h.Fragment,{})}function Wn({chat:e,open:t,setOpen:n,children:r}){const[s,o]=_.useState(!1),[i,a]=_.useState(!1),[l,g]=_.useState(e?.settings?.title||""),m=l!==e?.settings?.title&&l!=="";_.useEffect(()=>{},[i]);const u=()=>{},c=()=>{g(e?.settings?.title||"")};return h.jsxs(Dn,{open:t,onOpenChange:n,children:[r,h.jsxs(_n,{className:"w-56 pointer-events-none border-0 shadow-xl",children:[h.jsx(Me,{className:"h-6",children:"Chat Settings"}),h.jsx(rt,{}),h.jsxs(Me,{className:"flex flex-row gap-1",children:[h.jsx(In,{type:"text",value:l,onChange:f=>g(f.target.value),placeholder:"Extra name",className:"h-6 border-0"}),(!l||!m)&&h.jsx(Se,{className:"h-6 px-1 bg-base-200 hover:bg-accent",children:"âœï¸"}),l&&m&&h.jsx(Se,{className:"h-6 px-1 bg-base-200 hover:bg-accent",onClick:u,children:"âœ…"}),e?.settings?.title&&!m&&h.jsx(Se,{className:"h-6 px-1 bg-base-200 hover:bg-accent",children:"ðŸª£"}),!e?.settings?.title&&!m&&h.jsx(Se,{className:"h-6 px-1 bg-base-200 hover:bg-accent",children:"ðŸ•³ï¸"}),m&&h.jsx(Se,{className:"h-6 px-1 bg-base-200 hover:bg-accent",onClick:c,children:"â†©"})]}),h.jsx(Me,{}),h.jsx(Me,{children:h.jsx(Se,{variant:"ghost",className:"h-6 w-full",onClick:()=>{},children:"Start Audio Chat"})}),h.jsx(rt,{}),e?.partner?.is_bot&&h.jsx(Me,{}),h.jsx(rt,{})]})]})}const Kt=_.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:le("rounded-xl border bg-card text-card-foreground shadow",e),...t}));Kt.displayName="Card";const Bn=_.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:le("flex flex-col space-y-1.5 p-6",e),...t}));Bn.displayName="CardHeader";const Gn=_.forwardRef(({className:e,...t},n)=>h.jsx("h3",{ref:n,className:le("font-semibold leading-none tracking-tight",e),...t}));Gn.displayName="CardTitle";const qn=_.forwardRef(({className:e,...t},n)=>h.jsx("p",{ref:n,className:le("text-sm text-muted-foreground",e),...t}));qn.displayName="CardDescription";const Un=_.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:le("p-6 pt-0",e),...t}));Un.displayName="CardContent";const Kn=_.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:le("flex items-center p-6 pt-0",e),...t}));Kn.displayName="CardFooter";function Xn({colorClass:e="text-black-200"}){return h.jsx("svg",{className:e,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M5 10C5 10.8284 4.32843 11.5 3.5 11.5C2.67157 11.5 2 10.8284 2 10C2 9.17157 2.67157 8.5 3.5 8.5C4.32843 8.5 5 9.17157 5 10ZM11.5 10C11.5 10.8284 10.8284 11.5 10 11.5C9.17157 11.5 8.5 10.8284 8.5 10C8.5 9.17157 9.17157 8.5 10 8.5C10.8284 8.5 11.5 9.17157 11.5 10ZM17.5 11.5C18.3284 11.5 19 10.8284 19 10C19 9.17157 18.3284 8.5 17.5 8.5C16.6716 8.5 16 9.17157 16 10C16 10.8284 16.6716 11.5 17.5 11.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Jn({chat:e=null,isSelected:t=!1,navigateTo:n=r=>{}}){const[r,s]=_.useState(!1);var o="No messages yet";return h.jsxs(Wn,{chat:e,open:r,setOpen:s,children:[h.jsx(Kt,{className:le("bg-base-200 hover:bg-base-100 p-0 border-0",r&&"pointer-events-none hover:bg-base-300",t&&"bg-base-100"),onClick:()=>{r||n(`/chat/${e?.uuid}`)},children:h.jsx("div",{className:"p-[5px] px-2",children:h.jsx("div",{className:"",children:h.jsxs("div",{className:"flex text-nowrap text-lg whitespace-nowrap overflow-x-hidden",children:[o,h.jsxs("div",{className:"absolute right-4 flex flex-row",children:[h.jsx(Fn,{unreadCount:0})," ",!e?.partner?.is_bot&&h.jsx(Hn,{isOnline:!1}),h.jsx(Se,{className:"flex h-4 w-6 p-0 content-center items-center justify-center bg-transparent shadow-none hover:bg-base-200",onClick:i=>{s(!r),i.stopPropagation()},children:h.jsx(Xn,{})})]})]})})})},e?.uuid),h.jsx(An,{className:"h-0 bg-error z-10 display-none"})]})}const Yn=({size:e=24,className:t,...n})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:le("animate-spin",t),children:h.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})});var ot={exports:{}},st={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _t;function Zn(){if(_t)return st;_t=1;var e=Pn();function t(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,o=e.useLayoutEffect,i=e.useDebugValue;function a(u,c){var f=c(),x=r({inst:{value:f,getSnapshot:c}}),y=x[0].inst,b=x[1];return o(function(){y.value=f,y.getSnapshot=c,l(y)&&b({inst:y})},[u,f,c]),s(function(){return l(y)&&b({inst:y}),u(function(){l(y)&&b({inst:y})})},[u]),i(f),f}function l(u){var c=u.getSnapshot;u=u.value;try{var f=c();return!n(u,f)}catch{return!0}}function g(u,c){return c()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:a;return st.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,st}var It;function Qn(){return It||(It=1,ot.exports=Zn()),ot.exports}var er=Qn(),At=Object.prototype.hasOwnProperty;function ht(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&ht(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(At.call(e,n)&&++r&&!At.call(t,n)||!(n in t)||!ht(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}const pe=new WeakMap,xe=()=>{},Z=xe(),mt=Object,A=e=>e===Z,de=e=>typeof e=="function",ye=(e,t)=>({...e,...t}),Xt=e=>de(e.then),it={},Ge={},Ct="undefined",Je=typeof window!=Ct,xt=typeof document!=Ct,tr=()=>Je&&typeof window.requestAnimationFrame!=Ct,Jt=(e,t)=>{const n=pe.get(e);return[()=>!A(t)&&e.get(t)||it,r=>{if(!A(t)){const s=e.get(t);t in Ge||(Ge[t]=s),n[5](t,ye(s,r),s||it)}},n[6],()=>!A(t)&&t in Ge?Ge[t]:!A(t)&&e.get(t)||it]};let yt=!0;const nr=()=>yt,[vt,St]=Je&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[xe,xe],rr=()=>{const e=xt&&document.visibilityState;return A(e)||e!=="hidden"},or=e=>(xt&&document.addEventListener("visibilitychange",e),vt("focus",e),()=>{xt&&document.removeEventListener("visibilitychange",e),St("focus",e)}),sr=e=>{const t=()=>{yt=!0,e()},n=()=>{yt=!1};return vt("online",t),vt("offline",n),()=>{St("online",t),St("offline",n)}},ir={isOnline:nr,isVisible:rr},ar={initFocus:or,initReconnect:sr},Tt=!zt.useId,He=!Je||"Deno"in globalThis,lr=e=>tr()?window.requestAnimationFrame(e):setTimeout(e,1),at=He?_.useEffect:_.useLayoutEffect,lt=typeof navigator<"u"&&navigator.connection,jt=!He&&lt&&(["slow-2g","2g"].includes(lt.effectiveType)||lt.saveData),qe=new WeakMap,ct=(e,t)=>mt.prototype.toString.call(e)===`[object ${t}]`;let cr=0;const wt=e=>{const t=typeof e,n=ct(e,"Date"),r=ct(e,"RegExp"),s=ct(e,"Object");let o,i;if(mt(e)===e&&!n&&!r){if(o=qe.get(e),o)return o;if(o=++cr+"~",qe.set(e,o),Array.isArray(e)){for(o="@",i=0;i<e.length;i++)o+=wt(e[i])+",";qe.set(e,o)}if(s){o="#";const a=mt.keys(e).sort();for(;!A(i=a.pop());)A(e[i])||(o+=i+":"+wt(e[i])+",");qe.set(e,o)}}else o=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return o},Rt=e=>{if(de(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?wt(e):"",[e,t]};let ur=0;const Et=()=>++ur,Yt=0,Zt=1,Qt=2,dr=3;var Oe={__proto__:null,ERROR_REVALIDATE_EVENT:dr,FOCUS_EVENT:Yt,MUTATE_EVENT:Qt,RECONNECT_EVENT:Zt};async function en(...e){const[t,n,r,s]=e,o=ye({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let i=o.populateCache;const a=o.rollbackOnError;let l=o.optimisticData;const g=c=>typeof a=="function"?a(c):a!==!1,m=o.throwOnError;if(de(n)){const c=n,f=[],x=t.keys();for(const y of x)!/^\$(inf|sub)\$/.test(y)&&c(t.get(y)._k)&&f.push(y);return Promise.all(f.map(u))}return u(n);async function u(c){const[f]=Rt(c);if(!f)return;const[x,y]=Jt(t,f),[b,d,F,O]=pe.get(t),$=()=>{const G=b[f];return(de(o.revalidate)?o.revalidate(x().data,c):o.revalidate!==!1)&&(delete F[f],delete O[f],G&&G[0])?G[0](Qt).then(()=>x().data):x().data};if(e.length<3)return $();let j=r,N;const v=Et();d[f]=[v,0];const L=!A(l),q=x(),K=q.data,U=q._c,T=A(U)?K:U;if(L&&(l=de(l)?l(T,K):l,y({data:l,_c:T})),de(j))try{j=j(T)}catch(G){N=G}if(j&&Xt(j))if(j=await j.catch(G=>{N=G}),v!==d[f][0]){if(N)throw N;return j}else N&&L&&g(N)&&(i=!0,y({data:T,_c:Z}));if(i&&!N)if(de(i)){const G=i(j,T);y({data:G,error:Z,_c:Z})}else y({data:j,error:Z,_c:Z});if(d[f][1]=Et(),Promise.resolve($()).then(()=>{y({_c:Z})}),N){if(m)throw N;return}return j}}const Mt=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},fr=(e,t)=>{if(!pe.has(e)){const n=ye(ar,t),r={},s=en.bind(Z,e);let o=xe;const i={},a=(m,u)=>{const c=i[m]||[];return i[m]=c,c.push(u),()=>c.splice(c.indexOf(u),1)},l=(m,u,c)=>{e.set(m,u);const f=i[m];if(f)for(const x of f)x(u,c)},g=()=>{if(!pe.has(e)&&(pe.set(e,[r,{},{},{},s,l,a]),!He)){const m=n.initFocus(setTimeout.bind(Z,Mt.bind(Z,r,Yt))),u=n.initReconnect(setTimeout.bind(Z,Mt.bind(Z,r,Zt)));o=()=>{m&&m(),u&&u(),pe.delete(e)}}};return g(),[e,s,g,o]}return[e,pe.get(e)[4]]},pr=(e,t,n,r,s)=>{const o=n.errorRetryCount,i=s.retryCount,a=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!A(o)&&i>o||setTimeout(r,a,s)},gr=ht,[tn,hr]=fr(new Map),mr=ye({onLoadingSlow:xe,onSuccess:xe,onError:xe,onErrorRetry:pr,onDiscarded:xe,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:jt?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:jt?5e3:3e3,compare:gr,isPaused:()=>!1,cache:tn,mutate:hr,fallback:{}},ir),xr=(e,t)=>{const n=ye(e,t);if(t){const{use:r,fallback:s}=e,{use:o,fallback:i}=t;r&&o&&(n.use=r.concat(o)),s&&i&&(n.fallback=ye(s,i))}return n},yr=_.createContext({}),vr="$inf$",nn=Je&&window.__SWR_DEVTOOLS_USE__,Sr=nn?window.__SWR_DEVTOOLS_USE__:[],wr=()=>{nn&&(window.__SWR_DEVTOOLS_REACT__=zt)},Er=e=>de(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],br=()=>ye(mr,_.useContext(yr)),zr=e=>(t,n,r)=>e(t,n&&((...o)=>{const[i]=Rt(t),[,,,a]=pe.get(tn);if(i.startsWith(vr))return n(...o);const l=a[i];return A(l)?n(...o):(delete a[i],l)}),r),Cr=Sr.concat(zr),Rr=e=>function(...n){const r=br(),[s,o,i]=Er(n),a=xr(r,i);let l=e;const{use:g}=a,m=(g||[]).concat(Cr);for(let u=m.length;u--;)l=m[u](l);return l(s,o||a.fetcher||null,a)},Nr=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};wr();const ut=zt.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),dt={dedupe:!0},Pr=(e,t,n)=>{const{cache:r,compare:s,suspense:o,fallbackData:i,revalidateOnMount:a,revalidateIfStale:l,refreshInterval:g,refreshWhenHidden:m,refreshWhenOffline:u,keepPreviousData:c}=n,[f,x,y,b]=pe.get(r),[d,F]=Rt(e),O=_.useRef(!1),$=_.useRef(!1),j=_.useRef(d),N=_.useRef(t),v=_.useRef(n),L=()=>v.current,q=()=>L().isVisible()&&L().isOnline(),[K,U,T,G]=Jt(r,d),W=_.useRef({}).current,B=A(i)?A(n.fallback)?Z:n.fallback[d]:i,X=(P,S)=>{for(const M in W){const k=M;if(k==="data"){if(!s(P[k],S[k])&&(!A(P[k])||!s(z,S[k])))return!1}else if(S[k]!==P[k])return!1}return!0},Ce=_.useMemo(()=>{const P=!d||!t?!1:A(a)?L().isPaused()||o?!1:l!==!1:a,S=J=>{const ie=ye(J);return delete ie._k,P?{isValidating:!0,isLoading:!0,...ie}:ie},M=K(),k=G(),Y=S(M),ue=M===k?Y:S(k);let I=Y;return[()=>{const J=S(K());return X(J,I)?(I.data=J.data,I.isLoading=J.isLoading,I.isValidating=J.isValidating,I.error=J.error,I):(I=J,J)},()=>ue]},[r,d]),Q=er.useSyncExternalStore(_.useCallback(P=>T(d,(S,M)=>{X(M,S)||P()}),[r,d]),Ce[0],Ce[1]),Re=!O.current,Ne=f[d]&&f[d].length>0,ce=Q.data,ne=A(ce)?B&&Xt(B)?ut(B):B:ce,p=Q.error,E=_.useRef(ne),z=c?A(ce)?E.current:ce:ne,C=Ne&&!A(p)?!1:Re&&!A(a)?a:L().isPaused()?!1:o?A(ne)?!1:l:A(ne)||l,w=!!(d&&t&&Re&&C),D=A(Q.isValidating)?w:Q.isValidating,H=A(Q.isLoading)?w:Q.isLoading,V=_.useCallback(async P=>{const S=N.current;if(!d||!S||$.current||L().isPaused())return!1;let M,k,Y=!0;const ue=P||{},I=!y[d]||!ue.dedupe,J=()=>Tt?!$.current&&d===j.current&&O.current:d===j.current,ie={isValidating:!1,isLoading:!1},he=()=>{U(ie)},je=()=>{const se=y[d];se&&se[1]===k&&delete y[d]},Be={isValidating:!0};A(K().data)&&(Be.isLoading=!0);try{if(I&&(U(Be),n.loadingTimeout&&A(K().data)&&setTimeout(()=>{Y&&J()&&L().onLoadingSlow(d,n)},n.loadingTimeout),y[d]=[S(F),Et()]),[M,k]=y[d],M=await M,I&&setTimeout(je,n.dedupingInterval),!y[d]||y[d][1]!==k)return I&&J()&&L().onDiscarded(d),!1;ie.error=Z;const se=x[d];if(!A(se)&&(k<=se[0]||k<=se[1]||se[1]===0))return he(),I&&J()&&L().onDiscarded(d),!1;const fe=K().data;ie.data=s(fe,M)?fe:M,I&&J()&&L().onSuccess(M,d,n)}catch(se){je();const fe=L(),{shouldRetryOnError:tt}=fe;fe.isPaused()||(ie.error=se,I&&J()&&(fe.onError(se,d,fe),(tt===!0||de(tt)&&tt(se))&&(!L().revalidateOnFocus||!L().revalidateOnReconnect||q())&&fe.onErrorRetry(se,d,fe,Nn=>{const nt=f[d];nt&&nt[0]&&nt[0](Oe.ERROR_REVALIDATE_EVENT,Nn)},{retryCount:(ue.retryCount||0)+1,dedupe:!0})))}return Y=!1,he(),!0},[d,r]),re=_.useCallback((...P)=>en(r,j.current,...P),[]);if(at(()=>{N.current=t,v.current=n,A(ce)||(E.current=ce)}),at(()=>{if(!d)return;const P=V.bind(Z,dt);let S=0;const k=Nr(d,f,(Y,ue={})=>{if(Y==Oe.FOCUS_EVENT){const I=Date.now();L().revalidateOnFocus&&I>S&&q()&&(S=I+L().focusThrottleInterval,P())}else if(Y==Oe.RECONNECT_EVENT)L().revalidateOnReconnect&&q()&&P();else{if(Y==Oe.MUTATE_EVENT)return V();if(Y==Oe.ERROR_REVALIDATE_EVENT)return V(ue)}});return $.current=!1,j.current=d,O.current=!0,U({_k:F}),C&&(A(ne)||He?P():lr(P)),()=>{$.current=!0,k()}},[d]),at(()=>{let P;function S(){const k=de(g)?g(K().data):g;k&&P!==-1&&(P=setTimeout(M,k))}function M(){!K().error&&(m||L().isVisible())&&(u||L().isOnline())?V(dt).then(S):S()}return S(),()=>{P&&(clearTimeout(P),P=-1)}},[g,m,u,d]),_.useDebugValue(z),o&&A(ne)&&d){if(!Tt&&He)throw new Error("Fallback data is required when using Suspense in SSR.");N.current=t,v.current=n,$.current=!1;const P=b[d];if(!A(P)){const S=re(P);ut(S)}if(A(p)){const S=V(dt);A(z)||(S.status="fulfilled",S.value=!0),ut(S)}else throw p}return{mutate:re,get data(){return W.data=!0,z},get error(){return W.error=!0,p},get isValidating(){return W.isValidating=!0,D},get isLoading(){return W.isLoading=!0,H}}},Lr=Rr(Pr),Dr=(...e)=>fetch(...e).then(t=>t.json());function _r({chatUUID:e,leftPannelCollapsed:t,onToggleCollapse:n,navigateTo:r}){const{data:s,isLoading:o}=Lr("/api/v1/chats/list",Dr),i=Jn,a=g=>h.jsx("div",{className:"text-gray-500 font-bold my-2",children:g},g),l=()=>{if(!s)return h.jsx("div",{className:"flex flex-grow w-full h-full items-center content-center justify-center",children:h.jsx(Yn,{})});let g=null;return s?.rows.flatMap(m=>{const u=new Date;let c=null;return Tn(u)?g!=="Today"&&(c=a("Today"),g="Today"):jn(u)?g!=="Yesterday"&&(c=a("Yesterday"),g="Yesterday"):Mn(u)&&g!=="Previous 7 Days"&&(c=a("Previous 7 Days"),g="Previous 7 Days"),[c,h.jsx(i,{chat:m,isSelected:m.uuid===e,navigateTo:r},`chat_${m.uuid}`)].filter(Boolean)})};return h.jsx("div",{className:"flex flex-col gap-0 h-full relative w-full",children:h.jsx("div",{className:"flex flex-col flex-grow gap-1 overflow-y-auto pl-2 pr-2 relative w-full max-w-full",children:!o&&l()})})}const{createElement:Te,createContext:Ir,forwardRef:rn,useCallback:ee,useContext:on,useEffect:Ee,useImperativeHandle:sn,useLayoutEffect:Ar,useMemo:Tr,useRef:te,useState:Ie}=Ut,Ot=Ut[`useId${Math.random()}`.slice(0,5)],jr=Ar,Ye=Ir(null);Ye.displayName="PanelGroupContext";const be=jr,Mr=typeof Ot=="function"?Ot:()=>null;let Or=0;function Nt(e=null){const t=Mr(),n=te(e||t||null);return n.current===null&&(n.current=""+Or++),e??n.current}function an({children:e,className:t="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:o,id:i,maxSize:a,minSize:l,onCollapse:g,onExpand:m,onResize:u,order:c,style:f,tagName:x="div",...y}){const b=on(Ye);if(b===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:d,expandPanel:F,getPanelSize:O,getPanelStyle:$,groupId:j,isPanelCollapsed:N,reevaluatePanelConstraints:v,registerPanel:L,resizePanel:q,unregisterPanel:K}=b,U=Nt(i),T=te({callbacks:{onCollapse:g,onExpand:m,onResize:u},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:a,minSize:l},id:U,idIsFromProps:i!==void 0,order:c});te({didLogMissingDefaultSizeWarning:!1}),be(()=>{const{callbacks:W,constraints:B}=T.current,X={...B};T.current.id=U,T.current.idIsFromProps=i!==void 0,T.current.order=c,W.onCollapse=g,W.onExpand=m,W.onResize=u,B.collapsedSize=n,B.collapsible=r,B.defaultSize=s,B.maxSize=a,B.minSize=l,(X.collapsedSize!==B.collapsedSize||X.collapsible!==B.collapsible||X.maxSize!==B.maxSize||X.minSize!==B.minSize)&&v(T.current,X)}),be(()=>{const W=T.current;return L(W),()=>{K(W)}},[c,U,L,K]),sn(o,()=>({collapse:()=>{d(T.current)},expand:W=>{F(T.current,W)},getId(){return U},getSize(){return O(T.current)},isCollapsed(){return N(T.current)},isExpanded(){return!N(T.current)},resize:W=>{q(T.current,W)}}),[d,F,O,N,U,q]);const G=$(T.current,s);return Te(x,{...y,children:e,className:t,id:i,style:{...G,...f},"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-group-id":j,"data-panel-id":U,"data-panel-size":parseFloat(""+G.flexGrow).toFixed(1)})}const ln=rn((e,t)=>Te(an,{...e,forwardedRef:t}));an.displayName="Panel";ln.displayName="forwardRef(Panel)";let bt=null,we=null;function kr(e,t){if(t){const n=(t&pn)!==0,r=(t&gn)!==0,s=(t&hn)!==0,o=(t&mn)!==0;if(n)return s?"se-resize":o?"ne-resize":"e-resize";if(r)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function $r(){we!==null&&(document.head.removeChild(we),bt=null,we=null)}function ft(e,t){const n=kr(e,t);bt!==n&&(bt=n,we===null&&(we=document.createElement("style"),document.head.appendChild(we)),we.innerHTML=`*{cursor: ${n}!important;}`)}function cn(e){return e.type==="keydown"}function un(e){return e.type.startsWith("pointer")}function dn(e){return e.type.startsWith("mouse")}function Ze(e){if(un(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(dn(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function Vr(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Hr(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function Fr(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:Vt(e),b:Vt(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;R(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:$t(kt(n.a)),b:$t(kt(n.b))};if(s.a===s.b){const o=r.childNodes,i={a:n.a.at(-1),b:n.b.at(-1)};let a=o.length;for(;a--;){const l=o[a];if(l===i.a)return 1;if(l===i.b)return-1}}return Math.sign(s.a-s.b)}const Wr=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Br(e){var t;const n=getComputedStyle((t=fn(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function Gr(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||Br(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||Wr.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function kt(e){let t=e.length;for(;t--;){const n=e[t];if(R(n,"Missing node"),Gr(n))return n}return null}function $t(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Vt(e){const t=[];for(;e;)t.push(e),e=fn(e);return t}function fn(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const pn=1,gn=2,hn=4,mn=8,qr=Vr()==="coarse";let ae=[],Ae=!1,me=new Map,Qe=new Map;const Fe=new Set;function Ur(e,t,n,r,s){var o;const{ownerDocument:i}=t,a={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:s},l=(o=me.get(i))!==null&&o!==void 0?o:0;return me.set(i,l+1),Fe.add(a),Ke(),function(){var m;Qe.delete(e),Fe.delete(a);const u=(m=me.get(i))!==null&&m!==void 0?m:1;if(me.set(i,u-1),Ke(),u===1&&me.delete(i),ae.includes(a)){const c=ae.indexOf(a);c>=0&&ae.splice(c,1),Lt(),s("up",!0,null)}}}function Ht(e){const{target:t}=e,{x:n,y:r}=Ze(e);Ae=!0,Pt({target:t,x:n,y:r}),Ke(),ae.length>0&&(Xe("down",e),e.preventDefault(),e.stopPropagation())}function ke(e){const{x:t,y:n}=Ze(e);if(Ae&&e.buttons===0&&(Ae=!1,Xe("up",e)),!Ae){const{target:r}=e;Pt({target:r,x:t,y:n})}Xe("move",e),Lt(),ae.length>0&&e.preventDefault()}function Pe(e){const{target:t}=e,{x:n,y:r}=Ze(e);Qe.clear(),Ae=!1,ae.length>0&&e.preventDefault(),Xe("up",e),Pt({target:t,x:n,y:r}),Lt(),Ke()}function Pt({target:e,x:t,y:n}){ae.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),Fe.forEach(s=>{const{element:o,hitAreaMargins:i}=s,a=o.getBoundingClientRect(),{bottom:l,left:g,right:m,top:u}=a,c=qr?i.coarse:i.fine;if(t>=g-c&&t<=m+c&&n>=u-c&&n<=l+c){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&Fr(r,o)>0){let x=r,y=!1;for(;x&&!x.contains(o);){if(Hr(x.getBoundingClientRect(),a)){y=!0;break}x=x.parentElement}if(y)return}ae.push(s)}})}function pt(e,t){Qe.set(e,t)}function Lt(){let e=!1,t=!1;ae.forEach(r=>{const{direction:s}=r;s==="horizontal"?e=!0:t=!0});let n=0;Qe.forEach(r=>{n|=r}),e&&t?ft("intersection",n):e?ft("horizontal",n):t?ft("vertical",n):$r()}function Ke(){me.forEach((e,t)=>{const{body:n}=t;n.removeEventListener("contextmenu",Pe),n.removeEventListener("pointerdown",Ht),n.removeEventListener("pointerleave",ke),n.removeEventListener("pointermove",ke)}),window.removeEventListener("pointerup",Pe),window.removeEventListener("pointercancel",Pe),Fe.size>0&&(Ae?(ae.length>0&&me.forEach((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("contextmenu",Pe),n.addEventListener("pointerleave",ke),n.addEventListener("pointermove",ke))}),window.addEventListener("pointerup",Pe),window.addEventListener("pointercancel",Pe)):me.forEach((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("pointerdown",Ht,{capture:!0}),n.addEventListener("pointermove",ke))}))}function Xe(e,t){Fe.forEach(n=>{const{setResizeHandlerState:r}=n,s=ae.includes(n);r(e,s,t)})}function Kr(){const[e,t]=Ie(0);return ee(()=>t(n=>n+1),[])}function R(e,t){if(!e)throw console.error(t),Error(t)}const Dt=10;function ze(e,t,n=Dt){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function ge(e,t,n=Dt){return ze(e,t,n)===0}function oe(e,t,n){return ze(e,t,n)===0}function Xr(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const s=e[r],o=t[r];if(!oe(s,o,n))return!1}return!0}function _e({panelConstraints:e,panelIndex:t,size:n}){const r=e[t];R(r!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:s=0,collapsible:o,maxSize:i=100,minSize:a=0}=r;if(ze(n,a)<0)if(o){const l=(s+a)/2;ze(n,l)<0?n=s:n=a}else n=a;return n=Math.min(i,n),n=parseFloat(n.toFixed(Dt)),n}function $e({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:o}){if(oe(e,0))return t;const i=[...t],[a,l]=r;R(a!=null,"Invalid first pivot index"),R(l!=null,"Invalid second pivot index");let g=0;if(o==="keyboard"){{const u=e<0?l:a,c=n[u];R(c,`Panel constraints not found for index ${u}`);const{collapsedSize:f=0,collapsible:x,minSize:y=0}=c;if(x){const b=t[u];if(R(b!=null,`Previous layout not found for panel index ${u}`),oe(b,f)){const d=y-b;ze(d,Math.abs(e))>0&&(e=e<0?0-d:d)}}}{const u=e<0?a:l,c=n[u];R(c,`No panel constraints found for index ${u}`);const{collapsedSize:f=0,collapsible:x,minSize:y=0}=c;if(x){const b=t[u];if(R(b!=null,`Previous layout not found for panel index ${u}`),oe(b,y)){const d=b-f;ze(d,Math.abs(e))>0&&(e=e<0?0-d:d)}}}}{const u=e<0?1:-1;let c=e<0?l:a,f=0;for(;;){const y=t[c];R(y!=null,`Previous layout not found for panel index ${c}`);const d=_e({panelConstraints:n,panelIndex:c,size:100})-y;if(f+=d,c+=u,c<0||c>=n.length)break}const x=Math.min(Math.abs(e),Math.abs(f));e=e<0?0-x:x}{let c=e<0?a:l;for(;c>=0&&c<n.length;){const f=Math.abs(e)-Math.abs(g),x=t[c];R(x!=null,`Previous layout not found for panel index ${c}`);const y=x-f,b=_e({panelConstraints:n,panelIndex:c,size:y});if(!oe(x,b)&&(g+=x-b,i[c]=b,g.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?c--:c++}}if(Xr(s,i))return s;{const u=e<0?l:a,c=t[u];R(c!=null,`Previous layout not found for panel index ${u}`);const f=c+g,x=_e({panelConstraints:n,panelIndex:u,size:f});if(i[u]=x,!oe(x,f)){let y=f-x,d=e<0?l:a;for(;d>=0&&d<n.length;){const F=i[d];R(F!=null,`Previous layout not found for panel index ${d}`);const O=F+y,$=_e({panelConstraints:n,panelIndex:d,size:O});if(oe(F,$)||(y-=$-F,i[d]=$),oe(y,0))break;e>0?d--:d++}}}const m=i.reduce((u,c)=>c+u,0);return oe(m,100)?i:s}function Jr({layout:e,panelsArray:t,pivotIndices:n}){let r=0,s=100,o=0,i=0;const a=n[0];R(a!=null,"No pivot index found"),t.forEach((u,c)=>{const{constraints:f}=u,{maxSize:x=100,minSize:y=0}=f;c===a?(r=y,s=x):(o+=y,i+=x)});const l=Math.min(s,100-o),g=Math.max(r,100-i),m=e[a];return{valueMax:l,valueMin:g,valueNow:m}}function We(e,t=document){return Array.from(t.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function xn(e,t,n=document){const s=We(e,n).findIndex(o=>o.getAttribute("data-panel-resize-handle-id")===t);return s??null}function yn(e,t,n){const r=xn(e,t,n);return r!=null?[r,r+1]:[-1,-1]}function vn(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const r=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return r||null}function et(e,t=document){const n=t.querySelector(`[data-panel-resize-handle-id="${e}"]`);return n||null}function Yr(e,t,n,r=document){var s,o,i,a;const l=et(t,r),g=We(e,r),m=l?g.indexOf(l):-1,u=(s=(o=n[m])===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:null,c=(i=(a=n[m+1])===null||a===void 0?void 0:a.id)!==null&&i!==void 0?i:null;return[u,c]}function Zr({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:r,panelDataArray:s,panelGroupElement:o,setLayout:i}){te({didWarnAboutMissingResizeHandle:!1}),be(()=>{if(!o)return;const a=We(n,o);for(let l=0;l<s.length-1;l++){const{valueMax:g,valueMin:m,valueNow:u}=Jr({layout:r,panelsArray:s,pivotIndices:[l,l+1]}),c=a[l];if(c!=null){const f=s[l];R(f,`No panel data found for index "${l}"`),c.setAttribute("aria-controls",f.id),c.setAttribute("aria-valuemax",""+Math.round(g)),c.setAttribute("aria-valuemin",""+Math.round(m)),c.setAttribute("aria-valuenow",u!=null?""+Math.round(u):"")}}return()=>{a.forEach((l,g)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,r,s,o]),Ee(()=>{if(!o)return;const a=t.current;R(a,"Eager values not found");const{panelDataArray:l}=a,g=vn(n,o);R(g!=null,`No group found for id "${n}"`);const m=We(n,o);R(m,`No resize handles found for group id "${n}"`);const u=m.map(c=>{const f=c.getAttribute("data-panel-resize-handle-id");R(f,"Resize handle element has no handle id attribute");const[x,y]=Yr(n,f,l,o);if(x==null||y==null)return()=>{};const b=d=>{if(!d.defaultPrevented)switch(d.key){case"Enter":{d.preventDefault();const F=l.findIndex(O=>O.id===x);if(F>=0){const O=l[F];R(O,`No panel data found for index ${F}`);const $=r[F],{collapsedSize:j=0,collapsible:N,minSize:v=0}=O.constraints;if($!=null&&N){const L=$e({delta:oe($,j)?v-j:j-$,initialLayout:r,panelConstraints:l.map(q=>q.constraints),pivotIndices:yn(n,f,o),prevLayout:r,trigger:"keyboard"});r!==L&&i(L)}}break}}};return c.addEventListener("keydown",b),()=>{c.removeEventListener("keydown",b)}});return()=>{u.forEach(c=>c())}},[o,e,t,n,r,s,i])}function Ft(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Sn(e,t){const n=e==="horizontal",{x:r,y:s}=Ze(t);return n?r:s}function Qr(e,t,n,r,s){const o=n==="horizontal",i=et(t,s);R(i,`No resize handle element found for id "${t}"`);const a=i.getAttribute("data-panel-group-id");R(a,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=r;const g=Sn(n,e),m=vn(a,s);R(m,`No group element found for id "${a}"`);const u=m.getBoundingClientRect(),c=o?u.width:u.height;return(g-l)/c*100}function eo(e,t,n,r,s,o){if(cn(e)){const i=n==="horizontal";let a=0;e.shiftKey?a=100:s!=null?a=s:a=10;let l=0;switch(e.key){case"ArrowDown":l=i?0:a;break;case"ArrowLeft":l=i?-a:0;break;case"ArrowRight":l=i?a:0;break;case"ArrowUp":l=i?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return r==null?0:Qr(e,t,n,r,o)}function to({panelDataArray:e}){const t=Array(e.length),n=e.map(o=>o.constraints);let r=0,s=100;for(let o=0;o<e.length;o++){const i=n[o];R(i,`Panel constraints not found for index ${o}`);const{defaultSize:a}=i;a!=null&&(r++,t[o]=a,s-=a)}for(let o=0;o<e.length;o++){const i=n[o];R(i,`Panel constraints not found for index ${o}`);const{defaultSize:a}=i;if(a!=null)continue;const l=e.length-r,g=s/l;r++,t[o]=g,s-=g}return t}function Le(e,t,n){t.forEach((r,s)=>{const o=e[s];R(o,`Panel data not found for index ${s}`);const{callbacks:i,constraints:a,id:l}=o,{collapsedSize:g=0,collapsible:m}=a,u=n[l];if(u==null||r!==u){n[l]=r;const{onCollapse:c,onExpand:f,onResize:x}=i;x&&x(r,u),m&&(c||f)&&(f&&(u==null||ge(u,g))&&!ge(r,g)&&f(),c&&(u==null||!ge(u,g))&&ge(r,g)&&c())}})}function Ue(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function no({defaultSize:e,dragState:t,layout:n,panelData:r,panelIndex:s,precision:o=3}){const i=n[s];let a;return i==null?a=e!=null?e.toPrecision(o):"1":r.length===1?a="1":a=i.toPrecision(o),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function ro(e,t=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...s)},t)}}function Wt(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function wn(e){return`react-resizable-panels:${e}`}function En(e){return e.map(t=>{const{constraints:n,id:r,idIsFromProps:s,order:o}=t;return s?r:o?`${o}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function bn(e,t){try{const n=wn(e),r=t.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function oo(e,t,n){var r,s;const o=(r=bn(e,n))!==null&&r!==void 0?r:{},i=En(t);return(s=o[i])!==null&&s!==void 0?s:null}function so(e,t,n,r,s){var o;const i=wn(e),a=En(t),l=(o=bn(e,s))!==null&&o!==void 0?o:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(i,JSON.stringify(l))}catch(g){console.error(g)}}function Bt({layout:e,panelConstraints:t}){const n=[...e],r=n.reduce((o,i)=>o+i,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(o=>`${o}%`).join(", ")}`);if(!oe(r,100)&&n.length>0)for(let o=0;o<t.length;o++){const i=n[o];R(i!=null,`No layout data found for index ${o}`);const a=100/r*i;n[o]=a}let s=0;for(let o=0;o<t.length;o++){const i=n[o];R(i!=null,`No layout data found for index ${o}`);const a=_e({panelConstraints:t,panelIndex:o,size:i});i!=a&&(s+=i-a,n[o]=a)}if(!oe(s,0))for(let o=0;o<t.length;o++){const i=n[o];R(i!=null,`No layout data found for index ${o}`);const a=i+s,l=_e({panelConstraints:t,panelIndex:o,size:a});if(i!==l&&(s-=l-i,n[o]=l,oe(s,0)))break}return n}const io=100,Ve={getItem:e=>(Wt(Ve),Ve.getItem(e)),setItem:(e,t)=>{Wt(Ve),Ve.setItem(e,t)}},Gt={};function zn({autoSaveId:e=null,children:t,className:n="",direction:r,forwardedRef:s,id:o=null,onLayout:i=null,keyboardResizeBy:a=null,storage:l=Ve,style:g,tagName:m="div",...u}){const c=Nt(o),f=te(null),[x,y]=Ie(null),[b,d]=Ie([]),F=Kr(),O=te({}),$=te(new Map),j=te(0),N=te({autoSaveId:e,direction:r,dragState:x,id:c,keyboardResizeBy:a,onLayout:i,storage:l}),v=te({layout:b,panelDataArray:[],panelDataArrayChanged:!1});te({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),sn(s,()=>({getId:()=>N.current.id,getLayout:()=>{const{layout:p}=v.current;return p},setLayout:p=>{const{onLayout:E}=N.current,{layout:z,panelDataArray:C}=v.current,w=Bt({layout:p,panelConstraints:C.map(D=>D.constraints)});Ft(z,w)||(d(w),v.current.layout=w,E&&E(w),Le(C,w,O.current))}}),[]),be(()=>{N.current.autoSaveId=e,N.current.direction=r,N.current.dragState=x,N.current.id=c,N.current.onLayout=i,N.current.storage=l}),Zr({committedValuesRef:N,eagerValuesRef:v,groupId:c,layout:b,panelDataArray:v.current.panelDataArray,setLayout:d,panelGroupElement:f.current}),Ee(()=>{const{panelDataArray:p}=v.current;if(e){if(b.length===0||b.length!==p.length)return;let E=Gt[e];E==null&&(E=ro(so,io),Gt[e]=E);const z=[...p],C=new Map($.current);E(e,z,C,b,l)}},[e,b,l]),Ee(()=>{});const L=ee(p=>{const{onLayout:E}=N.current,{layout:z,panelDataArray:C}=v.current;if(p.constraints.collapsible){const w=C.map(re=>re.constraints),{collapsedSize:D=0,panelSize:H,pivotIndices:V}=ve(C,p,z);if(R(H!=null,`Panel size not found for panel "${p.id}"`),!ge(H,D)){$.current.set(p.id,H);const P=De(C,p)===C.length-1?H-D:D-H,S=$e({delta:P,initialLayout:z,panelConstraints:w,pivotIndices:V,prevLayout:z,trigger:"imperative-api"});Ue(z,S)||(d(S),v.current.layout=S,E&&E(S),Le(C,S,O.current))}}},[]),q=ee((p,E)=>{const{onLayout:z}=N.current,{layout:C,panelDataArray:w}=v.current;if(p.constraints.collapsible){const D=w.map(M=>M.constraints),{collapsedSize:H=0,panelSize:V=0,minSize:re=0,pivotIndices:P}=ve(w,p,C),S=E??re;if(ge(V,H)){const M=$.current.get(p.id),k=M!=null&&M>=S?M:S,ue=De(w,p)===w.length-1?V-k:k-V,I=$e({delta:ue,initialLayout:C,panelConstraints:D,pivotIndices:P,prevLayout:C,trigger:"imperative-api"});Ue(C,I)||(d(I),v.current.layout=I,z&&z(I),Le(w,I,O.current))}}},[]),K=ee(p=>{const{layout:E,panelDataArray:z}=v.current,{panelSize:C}=ve(z,p,E);return R(C!=null,`Panel size not found for panel "${p.id}"`),C},[]),U=ee((p,E)=>{const{panelDataArray:z}=v.current,C=De(z,p);return no({defaultSize:E,dragState:x,layout:b,panelData:z,panelIndex:C})},[x,b]),T=ee(p=>{const{layout:E,panelDataArray:z}=v.current,{collapsedSize:C=0,collapsible:w,panelSize:D}=ve(z,p,E);return R(D!=null,`Panel size not found for panel "${p.id}"`),w===!0&&ge(D,C)},[]),G=ee(p=>{const{layout:E,panelDataArray:z}=v.current,{collapsedSize:C=0,collapsible:w,panelSize:D}=ve(z,p,E);return R(D!=null,`Panel size not found for panel "${p.id}"`),!w||ze(D,C)>0},[]),W=ee(p=>{const{panelDataArray:E}=v.current;E.push(p),E.sort((z,C)=>{const w=z.order,D=C.order;return w==null&&D==null?0:w==null?-1:D==null?1:w-D}),v.current.panelDataArrayChanged=!0,F()},[F]);be(()=>{if(v.current.panelDataArrayChanged){v.current.panelDataArrayChanged=!1;const{autoSaveId:p,onLayout:E,storage:z}=N.current,{layout:C,panelDataArray:w}=v.current;let D=null;if(p){const V=oo(p,w,z);V&&($.current=new Map(Object.entries(V.expandToSizes)),D=V.layout)}D==null&&(D=to({panelDataArray:w}));const H=Bt({layout:D,panelConstraints:w.map(V=>V.constraints)});Ft(C,H)||(d(H),v.current.layout=H,E&&E(H),Le(w,H,O.current))}}),be(()=>{const p=v.current;return()=>{p.layout=[]}},[]);const B=ee(p=>{let E=!1;const z=f.current;return z&&window.getComputedStyle(z,null).getPropertyValue("direction")==="rtl"&&(E=!0),function(w){w.preventDefault();const D=f.current;if(!D)return()=>null;const{direction:H,dragState:V,id:re,keyboardResizeBy:P,onLayout:S}=N.current,{layout:M,panelDataArray:k}=v.current,{initialLayout:Y}=V??{},ue=yn(re,p,D);let I=eo(w,p,H,V,P,D);const J=H==="horizontal";J&&E&&(I=-I);const ie=k.map(Be=>Be.constraints),he=$e({delta:I,initialLayout:Y??M,panelConstraints:ie,pivotIndices:ue,prevLayout:M,trigger:cn(w)?"keyboard":"mouse-or-touch"}),je=!Ue(M,he);(un(w)||dn(w))&&j.current!=I&&(j.current=I,!je&&I!==0?J?pt(p,I<0?pn:gn):pt(p,I<0?hn:mn):pt(p,0)),je&&(d(he),v.current.layout=he,S&&S(he),Le(k,he,O.current))}},[]),X=ee((p,E)=>{const{onLayout:z}=N.current,{layout:C,panelDataArray:w}=v.current,D=w.map(M=>M.constraints),{panelSize:H,pivotIndices:V}=ve(w,p,C);R(H!=null,`Panel size not found for panel "${p.id}"`);const P=De(w,p)===w.length-1?H-E:E-H,S=$e({delta:P,initialLayout:C,panelConstraints:D,pivotIndices:V,prevLayout:C,trigger:"imperative-api"});Ue(C,S)||(d(S),v.current.layout=S,z&&z(S),Le(w,S,O.current))},[]),Ce=ee((p,E)=>{const{layout:z,panelDataArray:C}=v.current,{collapsedSize:w=0,collapsible:D}=E,{collapsedSize:H=0,collapsible:V,maxSize:re=100,minSize:P=0}=p.constraints,{panelSize:S}=ve(C,p,z);S!=null&&(D&&V&&ge(S,w)?ge(w,H)||X(p,H):S<P?X(p,P):S>re&&X(p,re))},[X]),Q=ee((p,E)=>{const{direction:z}=N.current,{layout:C}=v.current;if(!f.current)return;const w=et(p,f.current);R(w,`Drag handle element not found for id "${p}"`);const D=Sn(z,E);y({dragHandleId:p,dragHandleRect:w.getBoundingClientRect(),initialCursorPosition:D,initialLayout:C})},[]),Re=ee(()=>{y(null)},[]),Ne=ee(p=>{const{panelDataArray:E}=v.current,z=De(E,p);z>=0&&(E.splice(z,1),delete O.current[p.id],v.current.panelDataArrayChanged=!0,F())},[F]),ce=Tr(()=>({collapsePanel:L,direction:r,dragState:x,expandPanel:q,getPanelSize:K,getPanelStyle:U,groupId:c,isPanelCollapsed:T,isPanelExpanded:G,reevaluatePanelConstraints:Ce,registerPanel:W,registerResizeHandle:B,resizePanel:X,startDragging:Q,stopDragging:Re,unregisterPanel:Ne,panelGroupElement:f.current}),[L,x,r,q,K,U,c,T,G,Ce,W,B,X,Q,Re,Ne]),ne={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Te(Ye.Provider,{value:ce},Te(m,{...u,children:t,className:n,id:o,ref:f,style:{...ne,...g},"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":c}))}const Cn=rn((e,t)=>Te(zn,{...e,forwardedRef:t}));zn.displayName="PanelGroup";Cn.displayName="forwardRef(PanelGroup)";function De(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function ve(e,t,n){const r=De(e,t),o=r===e.length-1?[r-1,r]:[r,r+1],i=n[r];return{...t.constraints,panelSize:i,pivotIndices:o}}function ao({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:r}){Ee(()=>{if(e||n==null||r==null)return;const s=et(t,r);if(s==null)return;const o=i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{i.preventDefault(),n(i);break}case"F6":{i.preventDefault();const a=s.getAttribute("data-panel-group-id");R(a,`No group element found for id "${a}"`);const l=We(a,r),g=xn(a,t,r);R(g!==null,`No resize element found for id "${t}"`);const m=i.shiftKey?g>0?g-1:l.length-1:g+1<l.length?g+1:0;l[m].focus();break}}};return s.addEventListener("keydown",o),()=>{s.removeEventListener("keydown",o)}},[r,e,t,n])}function Rn({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:r,id:s,onBlur:o,onDragging:i,onFocus:a,style:l={},tabIndex:g=0,tagName:m="div",...u}){var c,f;const x=te(null),y=te({onDragging:i});Ee(()=>{y.current.onDragging=i});const b=on(Ye);if(b===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:d,groupId:F,registerResizeHandle:O,startDragging:$,stopDragging:j,panelGroupElement:N}=b,v=Nt(s),[L,q]=Ie("inactive"),[K,U]=Ie(!1),[T,G]=Ie(null),W=te({state:L});be(()=>{W.current.state=L}),Ee(()=>{if(n)G(null);else{const Q=O(v);G(()=>Q)}},[n,v,O]);const B=(c=r?.coarse)!==null&&c!==void 0?c:15,X=(f=r?.fine)!==null&&f!==void 0?f:5;return Ee(()=>{if(n||T==null)return;const Q=x.current;return R(Q,"Element ref not attached"),Ur(v,Q,d,{coarse:B,fine:X},(Ne,ce,ne)=>{if(ce)switch(Ne){case"down":{q("drag"),R(ne,'Expected event to be defined for "down" action'),$(v,ne);const{onDragging:p}=y.current;p&&p(!0);break}case"move":{const{state:p}=W.current;p!=="drag"&&q("hover"),R(ne,'Expected event to be defined for "move" action'),T(ne);break}case"up":{q("hover"),j();const{onDragging:p}=y.current;p&&p(!1);break}}else q("inactive")})},[B,d,n,X,O,v,T,$,j]),ao({disabled:n,handleId:v,resizeHandler:T,panelGroupElement:N}),Te(m,{...u,children:e,className:t,id:s,onBlur:()=>{U(!1),o?.()},onFocus:()=>{U(!0),a?.()},ref:x,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...l},tabIndex:g,"data-panel-group-direction":d,"data-panel-group-id":F,"data-resize-handle":"","data-resize-handle-active":L==="drag"?"pointer":K?"keyboard":void 0,"data-resize-handle-state":L,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":v})}Rn.displayName="PanelResizeHandle";const lo=({className:e,...t})=>h.jsx(Cn,{className:le("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...t}),qt=ln,co=({withHandle:e,className:t,...n})=>h.jsx(Rn,{className:le("relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...n,children:e&&h.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm",children:h.jsx(On,{className:"h-2.5 w-2.5"})})});function uo(e,t=null,n=null){return{left:{minSize:e?0:100,defaultSize:t||(e?0:100),collapsedSize:0,collapsible:!0},right:{minSize:e?100:0,defaultSize:n||(e?100:0),collapsedSize:0,collapsible:!0}}}function fo(e=null,t=null){return{left:{minSize:18,defaultSize:e||25,collapsedSize:0,collapsible:!0},right:{minSize:60,defaultSize:t||75,collapsible:!0,collapsedSize:60}}}const po=_.forwardRef(({chatUUID:e,left:t,right:n,leftPannelRef:r,rightPannelRef:s,setLeftCollapsed:o},i)=>{const{isSm:l}=kn("sm"),[,g]=_.useState(!1),m=null,u=null,c=uo(e,m,u),f=fo(m,u);console.log("chatId",e),console.log("FRONTEND",null),_.useEffect(()=>{l||(e?(r.current.collapse(),o(!0)):e||(s.current.collapse(),g(!0)))},[l,e,r,s]);const x=()=>{o(r.current.isCollapsed())},y=b=>{console.log("onLayout",b),$n.set("react-resizable-panels-layout",JSON.stringify(b))};return _.useImperativeHandle(i,()=>({leftPannelRef:r.current,rightPannelRef:s.current})),h.jsxs(lo,{direction:"horizontal",className:"",id:"group",onLayout:y,children:[h.jsx(qt,{onCollapse:x,onExpand:x,ref:r,id:"left-panel",...l?f.left:c.left,order:1,children:h.jsx("div",{className:"flex flex-col h-full bg-base-200 relative",children:t})}),l&&h.jsx(co,{id:"resize-handle",withHandle:!0}),h.jsx(qt,{ref:s,id:"right-panel",...l?f.right:c.right,order:2,children:h.jsx("div",{className:"flex h-full items-center justify-center content-center relative",children:n})})]})});function mo({children:e,chatUUID:t=null,navigateTo:n}){const[r,s]=_.useState(!1),o=_.useRef(null),i=_.useRef(null),a=()=>{const l=o.current.isCollapsed();l?o.current.expand():o.current.collapse(),s(!l)};return h.jsx(h.Fragment,{children:h.jsx("div",{className:"flex h-screen",children:h.jsx(po,{chatUUID:t,leftPannelRef:o,rightPannelRef:i,setLeftCollapsed:s,left:h.jsx(_r,{chatUUID:t,leftPannelCollapsed:r,onToggleCollapse:a,navigateTo:n}),right:e})})})}export{Kt as C,mo as a,hr as m,Lr as u};
