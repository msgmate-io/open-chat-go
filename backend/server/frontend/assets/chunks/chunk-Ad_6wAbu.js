import{j as f,h as Ce,s as Dn,r as V,D as Mn,n as kn,p as ye,q as He,B as re,m as An,v as $n,w as _n,x as Hn,R as sn,y as Bn,z as Tn,A as Gn}from"./chunk-DZN0tiZI.js";import{I as On}from"./chunk-UecANH-m.js";import{C as Fn}from"./chunk-CdM6_uGQ.js";import{u as Wn}from"./chunk-DXoj4vT9.js";const Vn=Dn("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ge({className:e,variant:n,...t}){return f.jsx("div",{className:Ce(Vn({variant:n}),e),...t})}function Kn({isOnline:e}){return e?f.jsx(Ge,{className:"bg-transparent flex items-center content-center justify-center h-6 w-6 hover:bg-transparent",children:"🟢"}):f.jsx(Ge,{className:"bg-transparent flex items-center content-center justify-center h-6 w-6 hover:bg-transparent",children:"🔴"})}function qn({unreadCount:e}){return e>0?f.jsx(Ge,{className:"bg-transparent flex flex-row items-center content-center justify-center text-black h-6 w-10 px-0 hover:bg-transparent",children:`${e}x📮`}):f.jsx(f.Fragment,{})}function Xn({chat:e,open:n,setOpen:t,children:r}){const[i,o]=V.useState(!1),[s,l]=V.useState(!1),[a,p]=V.useState(e?.settings?.title||""),x=a!==e?.settings?.title&&a!=="";V.useEffect(()=>{},[s]);const d=()=>{},c=()=>{p(e?.settings?.title||"")};return f.jsxs(Mn,{open:n,onOpenChange:t,children:[r,f.jsxs(kn,{className:"w-56 pointer-events-none border-0 shadow-xl",children:[f.jsx(ye,{className:"h-6",children:"Chat Settings"}),f.jsx(He,{}),f.jsxs(ye,{className:"flex flex-row gap-1",children:[f.jsx(On,{type:"text",value:a,onChange:g=>p(g.target.value),placeholder:"Extra name",className:"h-6 border-0"}),(!a||!x)&&f.jsx(re,{className:"h-6 px-1 bg-base-200 hover:bg-accent",children:"✍️"}),a&&x&&f.jsx(re,{className:"h-6 px-1 bg-base-200 hover:bg-accent",onClick:d,children:"✅"}),e?.settings?.title&&!x&&f.jsx(re,{className:"h-6 px-1 bg-base-200 hover:bg-accent",children:"🪣"}),!e?.settings?.title&&!x&&f.jsx(re,{className:"h-6 px-1 bg-base-200 hover:bg-accent",children:"🕳️"}),x&&f.jsx(re,{className:"h-6 px-1 bg-base-200 hover:bg-accent",onClick:c,children:"↩"})]}),f.jsx(ye,{}),f.jsx(ye,{children:f.jsx(re,{variant:"ghost",className:"h-6 w-full",onClick:()=>{},children:"Start Audio Chat"})}),f.jsx(He,{}),e?.partner?.is_bot&&f.jsx(ye,{}),f.jsx(He,{})]})]})}function Yn({colorClass:e="text-black-200"}){return f.jsx("svg",{className:e,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M5 10C5 10.8284 4.32843 11.5 3.5 11.5C2.67157 11.5 2 10.8284 2 10C2 9.17157 2.67157 8.5 3.5 8.5C4.32843 8.5 5 9.17157 5 10ZM11.5 10C11.5 10.8284 10.8284 11.5 10 11.5C9.17157 11.5 8.5 10.8284 8.5 10C8.5 9.17157 9.17157 8.5 10 8.5C10.8284 8.5 11.5 9.17157 11.5 10ZM17.5 11.5C18.3284 11.5 19 10.8284 19 10C19 9.17157 18.3284 8.5 17.5 8.5C16.6716 8.5 16 9.17157 16 10C16 10.8284 16.6716 11.5 17.5 11.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Jn({chat:e=null,isSelected:n=!1,navigateTo:t=r=>{}}){const[r,i]=V.useState(!1);var o="No messages yet";return f.jsxs(Xn,{chat:e,open:r,setOpen:i,children:[f.jsx(Fn,{className:Ce("bg-base-200 hover:bg-base-100 p-0 border-0",r&&"pointer-events-none hover:bg-base-300",n&&"bg-base-100"),onClick:()=>{r||t(`/chat/${e?.uuid}`)},children:f.jsx("div",{className:"p-[5px] px-2",children:f.jsx("div",{className:"",children:f.jsxs("div",{className:"flex text-nowrap text-lg whitespace-nowrap overflow-x-hidden",children:[o,f.jsxs("div",{className:"absolute right-4 flex flex-row",children:[f.jsx(qn,{unreadCount:0})," ",!e?.partner?.is_bot&&f.jsx(Kn,{isOnline:!1}),f.jsx(re,{className:"flex h-4 w-6 p-0 content-center items-center justify-center bg-transparent shadow-none hover:bg-base-200",onClick:s=>{i(!r),s.stopPropagation()},children:f.jsx(Yn,{})})]})]})})})},e?.uuid),f.jsx(An,{className:"h-0 bg-error z-10 display-none"})]})}const Zn=({size:e=24,className:n,...t})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:Ce("animate-spin",n),children:f.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Un=(...e)=>fetch(...e).then(n=>n.json());function Qn({chatUUID:e,leftPannelCollapsed:n,onToggleCollapse:t,navigateTo:r}){const{data:i,isLoading:o}=Wn("/api/v1/chats/list",Un),s=Jn,l=p=>f.jsx("div",{className:"text-gray-500 font-bold my-2",children:p},p),a=()=>{if(!i)return f.jsx("div",{className:"flex flex-grow w-full h-full items-center content-center justify-center",children:f.jsx(Zn,{})});let p=null;return i?.rows.flatMap(x=>{const d=new Date;let c=null;return $n(d)?p!=="Today"&&(c=l("Today"),p="Today"):_n(d)?p!=="Yesterday"&&(c=l("Yesterday"),p="Yesterday"):Hn(d)&&p!=="Previous 7 Days"&&(c=l("Previous 7 Days"),p="Previous 7 Days"),[c,f.jsx(s,{chat:x,isSelected:x.uuid===e,navigateTo:r},`chat_${x.uuid}`)].filter(Boolean)})};return f.jsx("div",{className:"flex flex-col gap-0 h-full relative w-full",children:f.jsx("div",{className:"flex flex-col flex-grow gap-1 overflow-y-auto pl-2 pr-2 relative w-full max-w-full",children:!o&&a()})})}const{createElement:he,createContext:et,forwardRef:ln,useCallback:B,useContext:an,useEffect:ie,useImperativeHandle:cn,useLayoutEffect:nt,useMemo:tt,useRef:T,useState:pe}=sn,Ye=sn[`useId${Math.random()}`.slice(0,5)],rt=nt,je=et(null);je.displayName="PanelGroupContext";const se=rt,ot=typeof Ye=="function"?Ye:()=>null;let it=0;function Fe(e=null){const n=ot(),t=T(e||n||null);return t.current===null&&(t.current=""+it++),e??t.current}function un({children:e,className:n="",collapsedSize:t,collapsible:r,defaultSize:i,forwardedRef:o,id:s,maxSize:l,minSize:a,onCollapse:p,onExpand:x,onResize:d,order:c,style:g,tagName:h="div",...E}){const C=an(je);if(C===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:S,expandPanel:M,getPanelSize:j,getPanelStyle:k,groupId:K,isPanelCollapsed:N,reevaluatePanelConstraints:y,registerPanel:G,resizePanel:F,unregisterPanel:ee}=C,W=Fe(s),I=T({callbacks:{onCollapse:p,onExpand:x,onResize:d},constraints:{collapsedSize:t,collapsible:r,defaultSize:i,maxSize:l,minSize:a},id:W,idIsFromProps:s!==void 0,order:c});T({didLogMissingDefaultSizeWarning:!1}),se(()=>{const{callbacks:A,constraints:$}=I.current,_={...$};I.current.id=W,I.current.idIsFromProps=s!==void 0,I.current.order=c,A.onCollapse=p,A.onExpand=x,A.onResize=d,$.collapsedSize=t,$.collapsible=r,$.defaultSize=i,$.maxSize=l,$.minSize=a,(_.collapsedSize!==$.collapsedSize||_.collapsible!==$.collapsible||_.maxSize!==$.maxSize||_.minSize!==$.minSize)&&y(I.current,_)}),se(()=>{const A=I.current;return G(A),()=>{ee(A)}},[c,W,G,ee]),cn(o,()=>({collapse:()=>{S(I.current)},expand:A=>{M(I.current,A)},getId(){return W},getSize(){return j(I.current)},isCollapsed(){return N(I.current)},isExpanded(){return!N(I.current)},resize:A=>{F(I.current,A)}}),[S,M,j,N,W,F]);const U=k(I.current,i);return he(h,{...E,children:e,className:n,id:s,style:{...U,...g},"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-group-id":K,"data-panel-id":W,"data-panel-size":parseFloat(""+U.flexGrow).toFixed(1)})}const dn=ln((e,n)=>he(un,{...e,forwardedRef:n}));un.displayName="Panel";dn.displayName="forwardRef(Panel)";let Oe=null,oe=null;function st(e,n){if(n){const t=(n&xn)!==0,r=(n&mn)!==0,i=(n&yn)!==0,o=(n&vn)!==0;if(t)return i?"se-resize":o?"ne-resize":"e-resize";if(r)return i?"sw-resize":o?"nw-resize":"w-resize";if(i)return"s-resize";if(o)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function lt(){oe!==null&&(document.head.removeChild(oe),Oe=null,oe=null)}function Be(e,n){const t=st(e,n);Oe!==t&&(Oe=t,oe===null&&(oe=document.createElement("style"),document.head.appendChild(oe)),oe.innerHTML=`*{cursor: ${t}!important;}`)}function fn(e){return e.type==="keydown"}function pn(e){return e.type.startsWith("pointer")}function gn(e){return e.type.startsWith("mouse")}function Ie(e){if(pn(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(gn(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function at(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function ct(e,n,t){return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y}function ut(e,n){if(e===n)throw new Error("Cannot compare node with itself");const t={a:Ue(e),b:Ue(n)};let r;for(;t.a.at(-1)===t.b.at(-1);)e=t.a.pop(),n=t.b.pop(),r=e;z(r,"Stacking order can only be calculated for elements with a common ancestor");const i={a:Ze(Je(t.a)),b:Ze(Je(t.b))};if(i.a===i.b){const o=r.childNodes,s={a:t.a.at(-1),b:t.b.at(-1)};let l=o.length;for(;l--;){const a=o[l];if(a===s.a)return 1;if(a===s.b)return-1}}return Math.sign(i.a-i.b)}const dt=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function ft(e){var n;const t=getComputedStyle((n=hn(e))!==null&&n!==void 0?n:e).display;return t==="flex"||t==="inline-flex"}function pt(e){const n=getComputedStyle(e);return!!(n.position==="fixed"||n.zIndex!=="auto"&&(n.position!=="static"||ft(e))||+n.opacity<1||"transform"in n&&n.transform!=="none"||"webkitTransform"in n&&n.webkitTransform!=="none"||"mixBlendMode"in n&&n.mixBlendMode!=="normal"||"filter"in n&&n.filter!=="none"||"webkitFilter"in n&&n.webkitFilter!=="none"||"isolation"in n&&n.isolation==="isolate"||dt.test(n.willChange)||n.webkitOverflowScrolling==="touch")}function Je(e){let n=e.length;for(;n--;){const t=e[n];if(z(t,"Missing node"),pt(t))return t}return null}function Ze(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Ue(e){const n=[];for(;e;)n.push(e),e=hn(e);return n}function hn(e){const{parentNode:n}=e;return n&&n instanceof ShadowRoot?n.host:n}const xn=1,mn=2,yn=4,vn=8,gt=at()==="coarse";let X=[],ge=!1,Q=new Map,De=new Map;const Se=new Set;function ht(e,n,t,r,i){var o;const{ownerDocument:s}=n,l={direction:t,element:n,hitAreaMargins:r,setResizeHandlerState:i},a=(o=Q.get(s))!==null&&o!==void 0?o:0;return Q.set(s,a+1),Se.add(l),Le(),function(){var x;De.delete(e),Se.delete(l);const d=(x=Q.get(s))!==null&&x!==void 0?x:1;if(Q.set(s,d-1),Le(),d===1&&Q.delete(s),X.includes(l)){const c=X.indexOf(l);c>=0&&X.splice(c,1),Ve(),i("up",!0,null)}}}function Qe(e){const{target:n}=e,{x:t,y:r}=Ie(e);ge=!0,We({target:n,x:t,y:r}),Le(),X.length>0&&(Re("down",e),e.preventDefault(),e.stopPropagation())}function ve(e){const{x:n,y:t}=Ie(e);if(ge&&e.buttons===0&&(ge=!1,Re("up",e)),!ge){const{target:r}=e;We({target:r,x:n,y:t})}Re("move",e),Ve(),X.length>0&&e.preventDefault()}function ce(e){const{target:n}=e,{x:t,y:r}=Ie(e);De.clear(),ge=!1,X.length>0&&e.preventDefault(),Re("up",e),We({target:n,x:t,y:r}),Ve(),Le()}function We({target:e,x:n,y:t}){X.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),Se.forEach(i=>{const{element:o,hitAreaMargins:s}=i,l=o.getBoundingClientRect(),{bottom:a,left:p,right:x,top:d}=l,c=gt?s.coarse:s.fine;if(n>=p-c&&n<=x+c&&t>=d-c&&t<=a+c){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&ut(r,o)>0){let h=r,E=!1;for(;h&&!h.contains(o);){if(ct(h.getBoundingClientRect(),l)){E=!0;break}h=h.parentElement}if(E)return}X.push(i)}})}function Te(e,n){De.set(e,n)}function Ve(){let e=!1,n=!1;X.forEach(r=>{const{direction:i}=r;i==="horizontal"?e=!0:n=!0});let t=0;De.forEach(r=>{t|=r}),e&&n?Be("intersection",t):e?Be("horizontal",t):n?Be("vertical",t):lt()}function Le(){Q.forEach((e,n)=>{const{body:t}=n;t.removeEventListener("contextmenu",ce),t.removeEventListener("pointerdown",Qe),t.removeEventListener("pointerleave",ve),t.removeEventListener("pointermove",ve)}),window.removeEventListener("pointerup",ce),window.removeEventListener("pointercancel",ce),Se.size>0&&(ge?(X.length>0&&Q.forEach((e,n)=>{const{body:t}=n;e>0&&(t.addEventListener("contextmenu",ce),t.addEventListener("pointerleave",ve),t.addEventListener("pointermove",ve))}),window.addEventListener("pointerup",ce),window.addEventListener("pointercancel",ce)):Q.forEach((e,n)=>{const{body:t}=n;e>0&&(t.addEventListener("pointerdown",Qe,{capture:!0}),t.addEventListener("pointermove",ve))}))}function Re(e,n){Se.forEach(t=>{const{setResizeHandlerState:r}=t,i=X.includes(t);r(e,i,n)})}function xt(){const[e,n]=pe(0);return B(()=>n(t=>t+1),[])}function z(e,n){if(!e)throw console.error(n),Error(n)}const Ke=10;function le(e,n,t=Ke){return e.toFixed(t)===n.toFixed(t)?0:e>n?1:-1}function Z(e,n,t=Ke){return le(e,n,t)===0}function O(e,n,t){return le(e,n,t)===0}function mt(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){const i=e[r],o=n[r];if(!O(i,o,t))return!1}return!0}function fe({panelConstraints:e,panelIndex:n,size:t}){const r=e[n];z(r!=null,`Panel constraints not found for index ${n}`);let{collapsedSize:i=0,collapsible:o,maxSize:s=100,minSize:l=0}=r;if(le(t,l)<0)if(o){const a=(i+l)/2;le(t,a)<0?t=i:t=l}else t=l;return t=Math.min(s,t),t=parseFloat(t.toFixed(Ke)),t}function ze({delta:e,initialLayout:n,panelConstraints:t,pivotIndices:r,prevLayout:i,trigger:o}){if(O(e,0))return n;const s=[...n],[l,a]=r;z(l!=null,"Invalid first pivot index"),z(a!=null,"Invalid second pivot index");let p=0;if(o==="keyboard"){{const d=e<0?a:l,c=t[d];z(c,`Panel constraints not found for index ${d}`);const{collapsedSize:g=0,collapsible:h,minSize:E=0}=c;if(h){const C=n[d];if(z(C!=null,`Previous layout not found for panel index ${d}`),O(C,g)){const S=E-C;le(S,Math.abs(e))>0&&(e=e<0?0-S:S)}}}{const d=e<0?l:a,c=t[d];z(c,`No panel constraints found for index ${d}`);const{collapsedSize:g=0,collapsible:h,minSize:E=0}=c;if(h){const C=n[d];if(z(C!=null,`Previous layout not found for panel index ${d}`),O(C,E)){const S=C-g;le(S,Math.abs(e))>0&&(e=e<0?0-S:S)}}}}{const d=e<0?1:-1;let c=e<0?a:l,g=0;for(;;){const E=n[c];z(E!=null,`Previous layout not found for panel index ${c}`);const S=fe({panelConstraints:t,panelIndex:c,size:100})-E;if(g+=S,c+=d,c<0||c>=t.length)break}const h=Math.min(Math.abs(e),Math.abs(g));e=e<0?0-h:h}{let c=e<0?l:a;for(;c>=0&&c<t.length;){const g=Math.abs(e)-Math.abs(p),h=n[c];z(h!=null,`Previous layout not found for panel index ${c}`);const E=h-g,C=fe({panelConstraints:t,panelIndex:c,size:E});if(!O(h,C)&&(p+=h-C,s[c]=C,p.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?c--:c++}}if(mt(i,s))return i;{const d=e<0?a:l,c=n[d];z(c!=null,`Previous layout not found for panel index ${d}`);const g=c+p,h=fe({panelConstraints:t,panelIndex:d,size:g});if(s[d]=h,!O(h,g)){let E=g-h,S=e<0?a:l;for(;S>=0&&S<t.length;){const M=s[S];z(M!=null,`Previous layout not found for panel index ${S}`);const j=M+E,k=fe({panelConstraints:t,panelIndex:S,size:j});if(O(M,k)||(E-=k-M,s[S]=k),O(E,0))break;e>0?S--:S++}}}const x=s.reduce((d,c)=>c+d,0);return O(x,100)?s:i}function yt({layout:e,panelsArray:n,pivotIndices:t}){let r=0,i=100,o=0,s=0;const l=t[0];z(l!=null,"No pivot index found"),n.forEach((d,c)=>{const{constraints:g}=d,{maxSize:h=100,minSize:E=0}=g;c===l?(r=E,i=h):(o+=E,s+=h)});const a=Math.min(i,100-o),p=Math.max(r,100-s),x=e[l];return{valueMax:a,valueMin:p,valueNow:x}}function we(e,n=document){return Array.from(n.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function zn(e,n,t=document){const i=we(e,t).findIndex(o=>o.getAttribute("data-panel-resize-handle-id")===n);return i??null}function bn(e,n,t){const r=zn(e,n,t);return r!=null?[r,r+1]:[-1,-1]}function Sn(e,n=document){var t;if(n instanceof HTMLElement&&(n==null||(t=n.dataset)===null||t===void 0?void 0:t.panelGroupId)==e)return n;const r=n.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return r||null}function Me(e,n=document){const t=n.querySelector(`[data-panel-resize-handle-id="${e}"]`);return t||null}function vt(e,n,t,r=document){var i,o,s,l;const a=Me(n,r),p=we(e,r),x=a?p.indexOf(a):-1,d=(i=(o=t[x])===null||o===void 0?void 0:o.id)!==null&&i!==void 0?i:null,c=(s=(l=t[x+1])===null||l===void 0?void 0:l.id)!==null&&s!==void 0?s:null;return[d,c]}function zt({committedValuesRef:e,eagerValuesRef:n,groupId:t,layout:r,panelDataArray:i,panelGroupElement:o,setLayout:s}){T({didWarnAboutMissingResizeHandle:!1}),se(()=>{if(!o)return;const l=we(t,o);for(let a=0;a<i.length-1;a++){const{valueMax:p,valueMin:x,valueNow:d}=yt({layout:r,panelsArray:i,pivotIndices:[a,a+1]}),c=l[a];if(c!=null){const g=i[a];z(g,`No panel data found for index "${a}"`),c.setAttribute("aria-controls",g.id),c.setAttribute("aria-valuemax",""+Math.round(p)),c.setAttribute("aria-valuemin",""+Math.round(x)),c.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{l.forEach((a,p)=>{a.removeAttribute("aria-controls"),a.removeAttribute("aria-valuemax"),a.removeAttribute("aria-valuemin"),a.removeAttribute("aria-valuenow")})}},[t,r,i,o]),ie(()=>{if(!o)return;const l=n.current;z(l,"Eager values not found");const{panelDataArray:a}=l,p=Sn(t,o);z(p!=null,`No group found for id "${t}"`);const x=we(t,o);z(x,`No resize handles found for group id "${t}"`);const d=x.map(c=>{const g=c.getAttribute("data-panel-resize-handle-id");z(g,"Resize handle element has no handle id attribute");const[h,E]=vt(t,g,a,o);if(h==null||E==null)return()=>{};const C=S=>{if(!S.defaultPrevented)switch(S.key){case"Enter":{S.preventDefault();const M=a.findIndex(j=>j.id===h);if(M>=0){const j=a[M];z(j,`No panel data found for index ${M}`);const k=r[M],{collapsedSize:K=0,collapsible:N,minSize:y=0}=j.constraints;if(k!=null&&N){const G=ze({delta:O(k,K)?y-K:K-k,initialLayout:r,panelConstraints:a.map(F=>F.constraints),pivotIndices:bn(t,g,o),prevLayout:r,trigger:"keyboard"});r!==G&&s(G)}}break}}};return c.addEventListener("keydown",C),()=>{c.removeEventListener("keydown",C)}});return()=>{d.forEach(c=>c())}},[o,e,n,t,r,i,s])}function en(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function wn(e,n){const t=e==="horizontal",{x:r,y:i}=Ie(n);return t?r:i}function bt(e,n,t,r,i){const o=t==="horizontal",s=Me(n,i);z(s,`No resize handle element found for id "${n}"`);const l=s.getAttribute("data-panel-group-id");z(l,"Resize handle element has no group id attribute");let{initialCursorPosition:a}=r;const p=wn(t,e),x=Sn(l,i);z(x,`No group element found for id "${l}"`);const d=x.getBoundingClientRect(),c=o?d.width:d.height;return(p-a)/c*100}function St(e,n,t,r,i,o){if(fn(e)){const s=t==="horizontal";let l=0;e.shiftKey?l=100:i!=null?l=i:l=10;let a=0;switch(e.key){case"ArrowDown":a=s?0:l;break;case"ArrowLeft":a=s?-l:0;break;case"ArrowRight":a=s?l:0;break;case"ArrowUp":a=s?0:-l;break;case"End":a=100;break;case"Home":a=-100;break}return a}else return r==null?0:bt(e,n,t,r,o)}function wt({panelDataArray:e}){const n=Array(e.length),t=e.map(o=>o.constraints);let r=0,i=100;for(let o=0;o<e.length;o++){const s=t[o];z(s,`Panel constraints not found for index ${o}`);const{defaultSize:l}=s;l!=null&&(r++,n[o]=l,i-=l)}for(let o=0;o<e.length;o++){const s=t[o];z(s,`Panel constraints not found for index ${o}`);const{defaultSize:l}=s;if(l!=null)continue;const a=e.length-r,p=i/a;r++,n[o]=p,i-=p}return n}function ue(e,n,t){n.forEach((r,i)=>{const o=e[i];z(o,`Panel data not found for index ${i}`);const{callbacks:s,constraints:l,id:a}=o,{collapsedSize:p=0,collapsible:x}=l,d=t[a];if(d==null||r!==d){t[a]=r;const{onCollapse:c,onExpand:g,onResize:h}=s;h&&h(r,d),x&&(c||g)&&(g&&(d==null||Z(d,p))&&!Z(r,p)&&g(),c&&(d==null||!Z(d,p))&&Z(r,p)&&c())}})}function Ne(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!=n[t])return!1;return!0}function Ct({defaultSize:e,dragState:n,layout:t,panelData:r,panelIndex:i,precision:o=3}){const s=t[i];let l;return s==null?l=e!=null?e.toPrecision(o):"1":r.length===1?l="1":l=s.toPrecision(o),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:n!==null?"none":void 0}}function Pt(e,n=10){let t=null;return(...i)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{e(...i)},n)}}function nn(e){try{if(typeof localStorage<"u")e.getItem=n=>localStorage.getItem(n),e.setItem=(n,t)=>{localStorage.setItem(n,t)};else throw new Error("localStorage not supported in this environment")}catch(n){console.error(n),e.getItem=()=>null,e.setItem=()=>{}}}function Cn(e){return`react-resizable-panels:${e}`}function Pn(e){return e.map(n=>{const{constraints:t,id:r,idIsFromProps:i,order:o}=n;return i?r:o?`${o}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((n,t)=>n.localeCompare(t)).join(",")}function En(e,n){try{const t=Cn(e),r=n.getItem(t);if(r){const i=JSON.parse(r);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function Et(e,n,t){var r,i;const o=(r=En(e,t))!==null&&r!==void 0?r:{},s=Pn(n);return(i=o[s])!==null&&i!==void 0?i:null}function Nt(e,n,t,r,i){var o;const s=Cn(e),l=Pn(n),a=(o=En(e,i))!==null&&o!==void 0?o:{};a[l]={expandToSizes:Object.fromEntries(t.entries()),layout:r};try{i.setItem(s,JSON.stringify(a))}catch(p){console.error(p)}}function tn({layout:e,panelConstraints:n}){const t=[...e],r=t.reduce((o,s)=>o+s,0);if(t.length!==n.length)throw Error(`Invalid ${n.length} panel layout: ${t.map(o=>`${o}%`).join(", ")}`);if(!O(r,100)&&t.length>0)for(let o=0;o<n.length;o++){const s=t[o];z(s!=null,`No layout data found for index ${o}`);const l=100/r*s;t[o]=l}let i=0;for(let o=0;o<n.length;o++){const s=t[o];z(s!=null,`No layout data found for index ${o}`);const l=fe({panelConstraints:n,panelIndex:o,size:s});s!=l&&(i+=s-l,t[o]=l)}if(!O(i,0))for(let o=0;o<n.length;o++){const s=t[o];z(s!=null,`No layout data found for index ${o}`);const l=s+i,a=fe({panelConstraints:n,panelIndex:o,size:l});if(s!==a&&(i-=a-s,t[o]=a,O(i,0)))break}return t}const Lt=100,be={getItem:e=>(nn(be),be.getItem(e)),setItem:(e,n)=>{nn(be),be.setItem(e,n)}},rn={};function Nn({autoSaveId:e=null,children:n,className:t="",direction:r,forwardedRef:i,id:o=null,onLayout:s=null,keyboardResizeBy:l=null,storage:a=be,style:p,tagName:x="div",...d}){const c=Fe(o),g=T(null),[h,E]=pe(null),[C,S]=pe([]),M=xt(),j=T({}),k=T(new Map),K=T(0),N=T({autoSaveId:e,direction:r,dragState:h,id:c,keyboardResizeBy:l,onLayout:s,storage:a}),y=T({layout:C,panelDataArray:[],panelDataArrayChanged:!1});T({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),cn(i,()=>({getId:()=>N.current.id,getLayout:()=>{const{layout:u}=y.current;return u},setLayout:u=>{const{onLayout:v}=N.current,{layout:w,panelDataArray:b}=y.current,m=tn({layout:u,panelConstraints:b.map(P=>P.constraints)});en(w,m)||(S(m),y.current.layout=m,v&&v(m),ue(b,m,j.current))}}),[]),se(()=>{N.current.autoSaveId=e,N.current.direction=r,N.current.dragState=h,N.current.id=c,N.current.onLayout=s,N.current.storage=a}),zt({committedValuesRef:N,eagerValuesRef:y,groupId:c,layout:C,panelDataArray:y.current.panelDataArray,setLayout:S,panelGroupElement:g.current}),ie(()=>{const{panelDataArray:u}=y.current;if(e){if(C.length===0||C.length!==u.length)return;let v=rn[e];v==null&&(v=Pt(Nt,Lt),rn[e]=v);const w=[...u],b=new Map(k.current);v(e,w,b,C,a)}},[e,C,a]),ie(()=>{});const G=B(u=>{const{onLayout:v}=N.current,{layout:w,panelDataArray:b}=y.current;if(u.constraints.collapsible){const m=b.map(Y=>Y.constraints),{collapsedSize:P=0,panelSize:L,pivotIndices:D}=te(b,u,w);if(z(L!=null,`Panel size not found for panel "${u.id}"`),!Z(L,P)){k.current.set(u.id,L);const J=de(b,u)===b.length-1?L-P:P-L,R=ze({delta:J,initialLayout:w,panelConstraints:m,pivotIndices:D,prevLayout:w,trigger:"imperative-api"});Ne(w,R)||(S(R),y.current.layout=R,v&&v(R),ue(b,R,j.current))}}},[]),F=B((u,v)=>{const{onLayout:w}=N.current,{layout:b,panelDataArray:m}=y.current;if(u.constraints.collapsible){const P=m.map(q=>q.constraints),{collapsedSize:L=0,panelSize:D=0,minSize:Y=0,pivotIndices:J}=te(m,u,b),R=v??Y;if(Z(D,L)){const q=k.current.get(u.id),xe=q!=null&&q>=R?q:R,_e=de(m,u)===m.length-1?D-xe:xe-D,H=ze({delta:_e,initialLayout:b,panelConstraints:P,pivotIndices:J,prevLayout:b,trigger:"imperative-api"});Ne(b,H)||(S(H),y.current.layout=H,w&&w(H),ue(m,H,j.current))}}},[]),ee=B(u=>{const{layout:v,panelDataArray:w}=y.current,{panelSize:b}=te(w,u,v);return z(b!=null,`Panel size not found for panel "${u.id}"`),b},[]),W=B((u,v)=>{const{panelDataArray:w}=y.current,b=de(w,u);return Ct({defaultSize:v,dragState:h,layout:C,panelData:w,panelIndex:b})},[h,C]),I=B(u=>{const{layout:v,panelDataArray:w}=y.current,{collapsedSize:b=0,collapsible:m,panelSize:P}=te(w,u,v);return z(P!=null,`Panel size not found for panel "${u.id}"`),m===!0&&Z(P,b)},[]),U=B(u=>{const{layout:v,panelDataArray:w}=y.current,{collapsedSize:b=0,collapsible:m,panelSize:P}=te(w,u,v);return z(P!=null,`Panel size not found for panel "${u.id}"`),!m||le(P,b)>0},[]),A=B(u=>{const{panelDataArray:v}=y.current;v.push(u),v.sort((w,b)=>{const m=w.order,P=b.order;return m==null&&P==null?0:m==null?-1:P==null?1:m-P}),y.current.panelDataArrayChanged=!0,M()},[M]);se(()=>{if(y.current.panelDataArrayChanged){y.current.panelDataArrayChanged=!1;const{autoSaveId:u,onLayout:v,storage:w}=N.current,{layout:b,panelDataArray:m}=y.current;let P=null;if(u){const D=Et(u,m,w);D&&(k.current=new Map(Object.entries(D.expandToSizes)),P=D.layout)}P==null&&(P=wt({panelDataArray:m}));const L=tn({layout:P,panelConstraints:m.map(D=>D.constraints)});en(b,L)||(S(L),y.current.layout=L,v&&v(L),ue(m,L,j.current))}}),se(()=>{const u=y.current;return()=>{u.layout=[]}},[]);const $=B(u=>{let v=!1;const w=g.current;return w&&window.getComputedStyle(w,null).getPropertyValue("direction")==="rtl"&&(v=!0),function(m){m.preventDefault();const P=g.current;if(!P)return()=>null;const{direction:L,dragState:D,id:Y,keyboardResizeBy:J,onLayout:R}=N.current,{layout:q,panelDataArray:xe}=y.current,{initialLayout:Ee}=D??{},_e=bn(Y,u,P);let H=St(m,u,L,D,J,P);const qe=L==="horizontal";qe&&v&&(H=-H);const jn=xe.map(In=>In.constraints),me=ze({delta:H,initialLayout:Ee??q,panelConstraints:jn,pivotIndices:_e,prevLayout:q,trigger:fn(m)?"keyboard":"mouse-or-touch"}),Xe=!Ne(q,me);(pn(m)||gn(m))&&K.current!=H&&(K.current=H,!Xe&&H!==0?qe?Te(u,H<0?xn:mn):Te(u,H<0?yn:vn):Te(u,0)),Xe&&(S(me),y.current.layout=me,R&&R(me),ue(xe,me,j.current))}},[]),_=B((u,v)=>{const{onLayout:w}=N.current,{layout:b,panelDataArray:m}=y.current,P=m.map(q=>q.constraints),{panelSize:L,pivotIndices:D}=te(m,u,b);z(L!=null,`Panel size not found for panel "${u.id}"`);const J=de(m,u)===m.length-1?L-v:v-L,R=ze({delta:J,initialLayout:b,panelConstraints:P,pivotIndices:D,prevLayout:b,trigger:"imperative-api"});Ne(b,R)||(S(R),y.current.layout=R,w&&w(R),ue(m,R,j.current))},[]),ke=B((u,v)=>{const{layout:w,panelDataArray:b}=y.current,{collapsedSize:m=0,collapsible:P}=v,{collapsedSize:L=0,collapsible:D,maxSize:Y=100,minSize:J=0}=u.constraints,{panelSize:R}=te(b,u,w);R!=null&&(P&&D&&Z(R,m)?Z(m,L)||_(u,L):R<J?_(u,J):R>Y&&_(u,Y))},[_]),ne=B((u,v)=>{const{direction:w}=N.current,{layout:b}=y.current;if(!g.current)return;const m=Me(u,g.current);z(m,`Drag handle element not found for id "${u}"`);const P=wn(w,v);E({dragHandleId:u,dragHandleRect:m.getBoundingClientRect(),initialCursorPosition:P,initialLayout:b})},[]),Ae=B(()=>{E(null)},[]),Pe=B(u=>{const{panelDataArray:v}=y.current,w=de(v,u);w>=0&&(v.splice(w,1),delete j.current[u.id],y.current.panelDataArrayChanged=!0,M())},[M]),$e=tt(()=>({collapsePanel:G,direction:r,dragState:h,expandPanel:F,getPanelSize:ee,getPanelStyle:W,groupId:c,isPanelCollapsed:I,isPanelExpanded:U,reevaluatePanelConstraints:ke,registerPanel:A,registerResizeHandle:$,resizePanel:_,startDragging:ne,stopDragging:Ae,unregisterPanel:Pe,panelGroupElement:g.current}),[G,h,r,F,ee,W,c,I,U,ke,A,$,_,ne,Ae,Pe]),ae={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return he(je.Provider,{value:$e},he(x,{...d,children:n,className:t,id:o,ref:g,style:{...ae,...p},"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":c}))}const Ln=ln((e,n)=>he(Nn,{...e,forwardedRef:n}));Nn.displayName="PanelGroup";Ln.displayName="forwardRef(PanelGroup)";function de(e,n){return e.findIndex(t=>t===n||t.id===n.id)}function te(e,n,t){const r=de(e,n),o=r===e.length-1?[r-1,r]:[r,r+1],s=t[r];return{...n.constraints,panelSize:s,pivotIndices:o}}function Rt({disabled:e,handleId:n,resizeHandler:t,panelGroupElement:r}){ie(()=>{if(e||t==null||r==null)return;const i=Me(n,r);if(i==null)return;const o=s=>{if(!s.defaultPrevented)switch(s.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{s.preventDefault(),t(s);break}case"F6":{s.preventDefault();const l=i.getAttribute("data-panel-group-id");z(l,`No group element found for id "${l}"`);const a=we(l,r),p=zn(l,n,r);z(p!==null,`No resize element found for id "${n}"`);const x=s.shiftKey?p>0?p-1:a.length-1:p+1<a.length?p+1:0;a[x].focus();break}}};return i.addEventListener("keydown",o),()=>{i.removeEventListener("keydown",o)}},[r,e,n,t])}function Rn({children:e=null,className:n="",disabled:t=!1,hitAreaMargins:r,id:i,onBlur:o,onDragging:s,onFocus:l,style:a={},tabIndex:p=0,tagName:x="div",...d}){var c,g;const h=T(null),E=T({onDragging:s});ie(()=>{E.current.onDragging=s});const C=an(je);if(C===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:S,groupId:M,registerResizeHandle:j,startDragging:k,stopDragging:K,panelGroupElement:N}=C,y=Fe(i),[G,F]=pe("inactive"),[ee,W]=pe(!1),[I,U]=pe(null),A=T({state:G});se(()=>{A.current.state=G}),ie(()=>{if(t)U(null);else{const ne=j(y);U(()=>ne)}},[t,y,j]);const $=(c=r?.coarse)!==null&&c!==void 0?c:15,_=(g=r?.fine)!==null&&g!==void 0?g:5;return ie(()=>{if(t||I==null)return;const ne=h.current;return z(ne,"Element ref not attached"),ht(y,ne,S,{coarse:$,fine:_},(Pe,$e,ae)=>{if($e)switch(Pe){case"down":{F("drag"),z(ae,'Expected event to be defined for "down" action'),k(y,ae);const{onDragging:u}=E.current;u&&u(!0);break}case"move":{const{state:u}=A.current;u!=="drag"&&F("hover"),z(ae,'Expected event to be defined for "move" action'),I(ae);break}case"up":{F("hover"),K();const{onDragging:u}=E.current;u&&u(!1);break}}else F("inactive")})},[$,S,t,_,j,y,I,k,K]),Rt({disabled:t,handleId:y,resizeHandler:I,panelGroupElement:N}),he(x,{...d,children:e,className:n,id:i,onBlur:()=>{W(!1),o?.()},onFocus:()=>{W(!0),l?.()},ref:h,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...a},tabIndex:p,"data-panel-group-direction":S,"data-panel-group-id":M,"data-resize-handle":"","data-resize-handle-active":G==="drag"?"pointer":ee?"keyboard":void 0,"data-resize-handle-state":G,"data-panel-resize-handle-enabled":!t,"data-panel-resize-handle-id":y})}Rn.displayName="PanelResizeHandle";const jt=({className:e,...n})=>f.jsx(Ln,{className:Ce("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...n}),on=dn,It=({withHandle:e,className:n,...t})=>f.jsx(Rn,{className:Ce("relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...t,children:e&&f.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm",children:f.jsx(Bn,{className:"h-2.5 w-2.5"})})});function Dt(e,n=null,t=null){return{left:{minSize:e?0:100,defaultSize:n||(e?0:100),collapsedSize:0,collapsible:!0},right:{minSize:e?100:0,defaultSize:t||(e?100:0),collapsedSize:0,collapsible:!0}}}function Mt(e=null,n=null){return{left:{minSize:18,defaultSize:e||25,collapsedSize:0,collapsible:!0},right:{minSize:60,defaultSize:n||75,collapsible:!0,collapsedSize:60}}}const kt=V.forwardRef(({chatUUID:e,left:n,right:t,leftPannelRef:r,rightPannelRef:i,setLeftCollapsed:o},s)=>{const{isSm:a}=Tn("sm"),[,p]=V.useState(!1),x=null,d=null,c=Dt(e,x,d),g=Mt(x,d);console.log("chatId",e),console.log("FRONTEND",null),V.useEffect(()=>{a||(e?(r.current.collapse(),o(!0)):e||(i.current.collapse(),p(!0)))},[a,e,r,i]);const h=()=>{o(r.current.isCollapsed())},E=C=>{console.log("onLayout",C),Gn.set("react-resizable-panels-layout",JSON.stringify(C))};return V.useImperativeHandle(s,()=>({leftPannelRef:r.current,rightPannelRef:i.current})),f.jsxs(jt,{direction:"horizontal",className:"",id:"group",onLayout:E,children:[f.jsx(on,{onCollapse:h,onExpand:h,ref:r,id:"left-panel",...a?g.left:c.left,order:1,children:f.jsx("div",{className:"flex flex-col h-full bg-base-200 relative",children:n})}),a&&f.jsx(It,{id:"resize-handle",withHandle:!0}),f.jsx(on,{ref:i,id:"right-panel",...a?g.right:c.right,order:2,children:f.jsx("div",{className:"flex h-full items-center justify-center content-center relative",children:t})})]})});function Bt({children:e,chatUUID:n=null,navigateTo:t}){const[r,i]=V.useState(!1),o=V.useRef(null),s=V.useRef(null),l=()=>{const a=o.current.isCollapsed();a?o.current.expand():o.current.collapse(),i(!a)};return f.jsx(f.Fragment,{children:f.jsx("div",{className:"flex h-screen",children:f.jsx(kt,{chatUUID:n,leftPannelRef:o,rightPannelRef:s,setLeftCollapsed:i,left:f.jsx(Qn,{chatUUID:n,leftPannelCollapsed:r,onToggleCollapse:l,navigateTo:t}),right:e})})})}export{Bt as C};
