import{j as m,r as L,P as zt,i as Gt}from"./index-y_eFCewu.js";import{c as le,f as Pn,D as Ln,b as Dn,d as Oe,e as ot,I as _n,B as Se,a as In,i as An,g as Tn,h as jn,j as Mn,k as On,l as kn}from"./typescript-cookie-DFuQ5SlG.js";const $n=Pn("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function gt({className:e,variant:t,...n}){return m.jsx("div",{className:le($n({variant:t}),e),...n})}function Vn({isOnline:e}){return e?m.jsx(gt,{className:"bg-transparent flex items-center content-center justify-center h-6 w-6 hover:bg-transparent",children:"🟢"}):m.jsx(gt,{className:"bg-transparent flex items-center content-center justify-center h-6 w-6 hover:bg-transparent",children:"🔴"})}function Hn({unreadCount:e}){return e>0?m.jsx(gt,{className:"bg-transparent flex flex-row items-center content-center justify-center text-black h-6 w-10 px-0 hover:bg-transparent",children:`${e}x📮`}):m.jsx(m.Fragment,{})}function Fn({chat:e,open:t,setOpen:n,children:r}){var u,c,g,h,v;L.useState(!1);const[s,o]=L.useState(!1),[i,a]=L.useState(((u=e==null?void 0:e.settings)==null?void 0:u.title)||""),l=i!==((c=e==null?void 0:e.settings)==null?void 0:c.title)&&i!=="";L.useEffect(()=>{},[s]);const p=()=>{},x=()=>{var b;a(((b=e==null?void 0:e.settings)==null?void 0:b.title)||"")};return m.jsxs(Ln,{open:t,onOpenChange:n,children:[r,m.jsxs(Dn,{className:"w-56 pointer-events-none border-0 shadow-xl",children:[m.jsx(Oe,{className:"h-6",children:"Chat Settings"}),m.jsx(ot,{}),m.jsxs(Oe,{className:"flex flex-row gap-1",children:[m.jsx(_n,{type:"text",value:i,onChange:b=>a(b.target.value),placeholder:"Extra name",className:"h-6 border-0"}),(!i||!l)&&m.jsx(Se,{className:"h-6 px-1 bg-base-200 hover:bg-accent",children:"✍️"}),i&&l&&m.jsx(Se,{className:"h-6 px-1 bg-base-200 hover:bg-accent",onClick:p,children:"✅"}),((g=e==null?void 0:e.settings)==null?void 0:g.title)&&!l&&m.jsx(Se,{className:"h-6 px-1 bg-base-200 hover:bg-accent",children:"🪣"}),!((h=e==null?void 0:e.settings)!=null&&h.title)&&!l&&m.jsx(Se,{className:"h-6 px-1 bg-base-200 hover:bg-accent",children:"🕳️"}),l&&m.jsx(Se,{className:"h-6 px-1 bg-base-200 hover:bg-accent",onClick:x,children:"↩"})]}),m.jsx(Oe,{}),m.jsx(Oe,{children:m.jsx(Se,{variant:"ghost",className:"h-6 w-full",onClick:()=>{},children:"Start Audio Chat"})}),m.jsx(ot,{}),((v=e==null?void 0:e.partner)==null?void 0:v.is_bot)&&m.jsx(Oe,{}),m.jsx(ot,{})]})]})}const qt=L.forwardRef(({className:e,...t},n)=>m.jsx("div",{ref:n,className:le("rounded-xl border bg-card text-card-foreground shadow",e),...t}));qt.displayName="Card";const Wn=L.forwardRef(({className:e,...t},n)=>m.jsx("div",{ref:n,className:le("flex flex-col space-y-1.5 p-6",e),...t}));Wn.displayName="CardHeader";const Bn=L.forwardRef(({className:e,...t},n)=>m.jsx("h3",{ref:n,className:le("font-semibold leading-none tracking-tight",e),...t}));Bn.displayName="CardTitle";const Gn=L.forwardRef(({className:e,...t},n)=>m.jsx("p",{ref:n,className:le("text-sm text-muted-foreground",e),...t}));Gn.displayName="CardDescription";const qn=L.forwardRef(({className:e,...t},n)=>m.jsx("div",{ref:n,className:le("p-6 pt-0",e),...t}));qn.displayName="CardContent";const Un=L.forwardRef(({className:e,...t},n)=>m.jsx("div",{ref:n,className:le("flex items-center p-6 pt-0",e),...t}));Un.displayName="CardFooter";function Kn({colorClass:e="text-black-200"}){return m.jsx("svg",{className:e,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M5 10C5 10.8284 4.32843 11.5 3.5 11.5C2.67157 11.5 2 10.8284 2 10C2 9.17157 2.67157 8.5 3.5 8.5C4.32843 8.5 5 9.17157 5 10ZM11.5 10C11.5 10.8284 10.8284 11.5 10 11.5C9.17157 11.5 8.5 10.8284 8.5 10C8.5 9.17157 9.17157 8.5 10 8.5C10.8284 8.5 11.5 9.17157 11.5 10ZM17.5 11.5C18.3284 11.5 19 10.8284 19 10C19 9.17157 18.3284 8.5 17.5 8.5C16.6716 8.5 16 9.17157 16 10C16 10.8284 16.6716 11.5 17.5 11.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Xn({chat:e=null,isSelected:t=!1,navigateTo:n=r=>{}}){var i;const[r,s]=L.useState(!1);return m.jsx(m.Fragment,{children:m.jsxs(Fn,{chat:e,open:r,setOpen:s,children:[m.jsx(qt,{className:le("bg-base-200 hover:bg-base-100 p-0 border-0",r&&"pointer-events-none hover:bg-base-300",t&&"bg-base-100"),onClick:()=>{r||n(`/chat/${e==null?void 0:e.uuid}`)},children:m.jsx("div",{className:"p-[5px] px-2",children:m.jsx("div",{className:"",children:m.jsxs("div",{className:"flex text-nowrap text-lg whitespace-nowrap overflow-x-hidden",children:["TODO",m.jsxs("div",{className:"absolute right-4 flex flex-row",children:[m.jsx(Hn,{unreadCount:0})," ",!((i=e==null?void 0:e.partner)!=null&&i.is_bot)&&m.jsx(Vn,{isOnline:!1}),m.jsx(Se,{className:"flex h-4 w-6 p-0 content-center items-center justify-center bg-transparent shadow-none hover:bg-base-200",onClick:a=>{s(!r),a.stopPropagation()},children:m.jsx(Kn,{})})]})]})})})},e==null?void 0:e.uuid),m.jsx(In,{className:"h-0 bg-error z-10 display-none"})]})})}const Jn=({size:e=24,className:t,...n})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:le("animate-spin",t),children:m.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})});var Ut={exports:{}},Kt={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Te=L;function Yn(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zn=typeof Object.is=="function"?Object.is:Yn,Qn=Te.useState,er=Te.useEffect,tr=Te.useLayoutEffect,nr=Te.useDebugValue;function rr(e,t){var n=t(),r=Qn({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return tr(function(){s.value=n,s.getSnapshot=t,st(s)&&o({inst:s})},[e,n,t]),er(function(){return st(s)&&o({inst:s}),e(function(){st(s)&&o({inst:s})})},[e]),nr(n),n}function st(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zn(e,n)}catch{return!0}}function or(e,t){return t()}var sr=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?or:rr;Kt.useSyncExternalStore=Te.useSyncExternalStore!==void 0?Te.useSyncExternalStore:sr;Ut.exports=Kt;var ir=Ut.exports,_t=Object.prototype.hasOwnProperty;function mt(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&mt(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(_t.call(e,n)&&++r&&!_t.call(t,n)||!(n in t)||!mt(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}const pe=new WeakMap,xe=()=>{},Z=xe(),ht=Object,A=e=>e===Z,de=e=>typeof e=="function",ve=(e,t)=>({...e,...t}),Xt=e=>de(e.then),it={},qe={},Ct="undefined",Ye=typeof window!=Ct,xt=typeof document!=Ct,ar=()=>Ye&&typeof window.requestAnimationFrame!=Ct,Jt=(e,t)=>{const n=pe.get(e);return[()=>!A(t)&&e.get(t)||it,r=>{if(!A(t)){const s=e.get(t);t in qe||(qe[t]=s),n[5](t,ve(s,r),s||it)}},n[6],()=>!A(t)&&t in qe?qe[t]:!A(t)&&e.get(t)||it]};let vt=!0;const lr=()=>vt,[yt,St]=Ye&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[xe,xe],cr=()=>{const e=xt&&document.visibilityState;return A(e)||e!=="hidden"},ur=e=>(xt&&document.addEventListener("visibilitychange",e),yt("focus",e),()=>{xt&&document.removeEventListener("visibilitychange",e),St("focus",e)}),dr=e=>{const t=()=>{vt=!0,e()},n=()=>{vt=!1};return yt("online",t),yt("offline",n),()=>{St("online",t),St("offline",n)}},fr={isOnline:lr,isVisible:cr},pr={initFocus:ur,initReconnect:dr},It=!zt.useId,Fe=!Ye||"Deno"in globalThis,gr=e=>ar()?window.requestAnimationFrame(e):setTimeout(e,1),at=Fe?L.useEffect:L.useLayoutEffect,lt=typeof navigator<"u"&&navigator.connection,At=!Fe&&lt&&(["slow-2g","2g"].includes(lt.effectiveType)||lt.saveData),Ue=new WeakMap,ct=(e,t)=>ht.prototype.toString.call(e)===`[object ${t}]`;let mr=0;const wt=e=>{const t=typeof e,n=ct(e,"Date"),r=ct(e,"RegExp"),s=ct(e,"Object");let o,i;if(ht(e)===e&&!n&&!r){if(o=Ue.get(e),o)return o;if(o=++mr+"~",Ue.set(e,o),Array.isArray(e)){for(o="@",i=0;i<e.length;i++)o+=wt(e[i])+",";Ue.set(e,o)}if(s){o="#";const a=ht.keys(e).sort();for(;!A(i=a.pop());)A(e[i])||(o+=i+":"+wt(e[i])+",");Ue.set(e,o)}}else o=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return o},Rt=e=>{if(de(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?wt(e):"",[e,t]};let hr=0;const Et=()=>++hr,Yt=0,Zt=1,Qt=2,xr=3;var ke={__proto__:null,ERROR_REVALIDATE_EVENT:xr,FOCUS_EVENT:Yt,MUTATE_EVENT:Qt,RECONNECT_EVENT:Zt};async function en(...e){const[t,n,r,s]=e,o=ve({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let i=o.populateCache;const a=o.rollbackOnError;let l=o.optimisticData;const p=c=>typeof a=="function"?a(c):a!==!1,x=o.throwOnError;if(de(n)){const c=n,g=[],h=t.keys();for(const v of h)!/^\$(inf|sub)\$/.test(v)&&c(t.get(v)._k)&&g.push(v);return Promise.all(g.map(u))}return u(n);async function u(c){const[g]=Rt(c);if(!g)return;const[h,v]=Jt(t,g),[b,d,F,O]=pe.get(t),$=()=>{const G=b[g];return(de(o.revalidate)?o.revalidate(h().data,c):o.revalidate!==!1)&&(delete F[g],delete O[g],G&&G[0])?G[0](Qt).then(()=>h().data):h().data};if(e.length<3)return $();let j=r,N;const y=Et();d[g]=[y,0];const D=!A(l),q=h(),K=q.data,U=q._c,T=A(U)?K:U;if(D&&(l=de(l)?l(T,K):l,v({data:l,_c:T})),de(j))try{j=j(T)}catch(G){N=G}if(j&&Xt(j))if(j=await j.catch(G=>{N=G}),y!==d[g][0]){if(N)throw N;return j}else N&&D&&p(N)&&(i=!0,v({data:T,_c:Z}));if(i&&!N)if(de(i)){const G=i(j,T);v({data:G,error:Z,_c:Z})}else v({data:j,error:Z,_c:Z});if(d[g][1]=Et(),Promise.resolve($()).then(()=>{v({_c:Z})}),N){if(x)throw N;return}return j}}const Tt=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},vr=(e,t)=>{if(!pe.has(e)){const n=ve(pr,t),r={},s=en.bind(Z,e);let o=xe;const i={},a=(x,u)=>{const c=i[x]||[];return i[x]=c,c.push(u),()=>c.splice(c.indexOf(u),1)},l=(x,u,c)=>{e.set(x,u);const g=i[x];if(g)for(const h of g)h(u,c)},p=()=>{if(!pe.has(e)&&(pe.set(e,[r,{},{},{},s,l,a]),!Fe)){const x=n.initFocus(setTimeout.bind(Z,Tt.bind(Z,r,Yt))),u=n.initReconnect(setTimeout.bind(Z,Tt.bind(Z,r,Zt)));o=()=>{x&&x(),u&&u(),pe.delete(e)}}};return p(),[e,s,p,o]}return[e,pe.get(e)[4]]},yr=(e,t,n,r,s)=>{const o=n.errorRetryCount,i=s.retryCount,a=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!A(o)&&i>o||setTimeout(r,a,s)},Sr=mt,[tn,wr]=vr(new Map),Er=ve({onLoadingSlow:xe,onSuccess:xe,onError:xe,onErrorRetry:yr,onDiscarded:xe,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:At?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:At?5e3:3e3,compare:Sr,isPaused:()=>!1,cache:tn,mutate:wr,fallback:{}},fr),br=(e,t)=>{const n=ve(e,t);if(t){const{use:r,fallback:s}=e,{use:o,fallback:i}=t;r&&o&&(n.use=r.concat(o)),s&&i&&(n.fallback=ve(s,i))}return n},zr=L.createContext({}),Cr="$inf$",nn=Ye&&window.__SWR_DEVTOOLS_USE__,Rr=nn?window.__SWR_DEVTOOLS_USE__:[],Nr=()=>{nn&&(window.__SWR_DEVTOOLS_REACT__=zt)},Pr=e=>de(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],Lr=()=>ve(Er,L.useContext(zr)),Dr=e=>(t,n,r)=>e(t,n&&((...o)=>{const[i]=Rt(t),[,,,a]=pe.get(tn);if(i.startsWith(Cr))return n(...o);const l=a[i];return A(l)?n(...o):(delete a[i],l)}),r),_r=Rr.concat(Dr),Ir=e=>function(...n){const r=Lr(),[s,o,i]=Pr(n),a=br(r,i);let l=e;const{use:p}=a,x=(p||[]).concat(_r);for(let u=x.length;u--;)l=x[u](l);return l(s,o||a.fetcher||null,a)},Ar=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};Nr();const ut=zt.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),dt={dedupe:!0},Tr=(e,t,n)=>{const{cache:r,compare:s,suspense:o,fallbackData:i,revalidateOnMount:a,revalidateIfStale:l,refreshInterval:p,refreshWhenHidden:x,refreshWhenOffline:u,keepPreviousData:c}=n,[g,h,v,b]=pe.get(r),[d,F]=Rt(e),O=L.useRef(!1),$=L.useRef(!1),j=L.useRef(d),N=L.useRef(t),y=L.useRef(n),D=()=>y.current,q=()=>D().isVisible()&&D().isOnline(),[K,U,T,G]=Jt(r,d),W=L.useRef({}).current,B=A(i)?A(n.fallback)?Z:n.fallback[d]:i,X=(P,S)=>{for(const M in W){const k=M;if(k==="data"){if(!s(P[k],S[k])&&(!A(P[k])||!s(z,S[k])))return!1}else if(S[k]!==P[k])return!1}return!0},Ce=L.useMemo(()=>{const P=!d||!t?!1:A(a)?D().isPaused()||o?!1:l!==!1:a,S=J=>{const ie=ve(J);return delete ie._k,P?{isValidating:!0,isLoading:!0,...ie}:ie},M=K(),k=G(),Y=S(M),ue=M===k?Y:S(k);let I=Y;return[()=>{const J=S(K());return X(J,I)?(I.data=J.data,I.isLoading=J.isLoading,I.isValidating=J.isValidating,I.error=J.error,I):(I=J,J)},()=>ue]},[r,d]),Q=ir.useSyncExternalStore(L.useCallback(P=>T(d,(S,M)=>{X(M,S)||P()}),[r,d]),Ce[0],Ce[1]),Re=!O.current,Ne=g[d]&&g[d].length>0,ce=Q.data,ne=A(ce)?B&&Xt(B)?ut(B):B:ce,f=Q.error,E=L.useRef(ne),z=c?A(ce)?E.current:ce:ne,C=Ne&&!A(f)?!1:Re&&!A(a)?a:D().isPaused()?!1:o?A(ne)?!1:l:A(ne)||l,w=!!(d&&t&&Re&&C),_=A(Q.isValidating)?w:Q.isValidating,H=A(Q.isLoading)?w:Q.isLoading,V=L.useCallback(async P=>{const S=N.current;if(!d||!S||$.current||D().isPaused())return!1;let M,k,Y=!0;const ue=P||{},I=!v[d]||!ue.dedupe,J=()=>It?!$.current&&d===j.current&&O.current:d===j.current,ie={isValidating:!1,isLoading:!1},me=()=>{U(ie)},Me=()=>{const se=v[d];se&&se[1]===k&&delete v[d]},Ge={isValidating:!0};A(K().data)&&(Ge.isLoading=!0);try{if(I&&(U(Ge),n.loadingTimeout&&A(K().data)&&setTimeout(()=>{Y&&J()&&D().onLoadingSlow(d,n)},n.loadingTimeout),v[d]=[S(F),Et()]),[M,k]=v[d],M=await M,I&&setTimeout(Me,n.dedupingInterval),!v[d]||v[d][1]!==k)return I&&J()&&D().onDiscarded(d),!1;ie.error=Z;const se=h[d];if(!A(se)&&(k<=se[0]||k<=se[1]||se[1]===0))return me(),I&&J()&&D().onDiscarded(d),!1;const fe=K().data;ie.data=s(fe,M)?fe:M,I&&J()&&D().onSuccess(M,d,n)}catch(se){Me();const fe=D(),{shouldRetryOnError:nt}=fe;fe.isPaused()||(ie.error=se,I&&J()&&(fe.onError(se,d,fe),(nt===!0||de(nt)&&nt(se))&&(!D().revalidateOnFocus||!D().revalidateOnReconnect||q())&&fe.onErrorRetry(se,d,fe,Nn=>{const rt=g[d];rt&&rt[0]&&rt[0](ke.ERROR_REVALIDATE_EVENT,Nn)},{retryCount:(ue.retryCount||0)+1,dedupe:!0})))}return Y=!1,me(),!0},[d,r]),re=L.useCallback((...P)=>en(r,j.current,...P),[]);if(at(()=>{N.current=t,y.current=n,A(ce)||(E.current=ce)}),at(()=>{if(!d)return;const P=V.bind(Z,dt);let S=0;const k=Ar(d,g,(Y,ue={})=>{if(Y==ke.FOCUS_EVENT){const I=Date.now();D().revalidateOnFocus&&I>S&&q()&&(S=I+D().focusThrottleInterval,P())}else if(Y==ke.RECONNECT_EVENT)D().revalidateOnReconnect&&q()&&P();else{if(Y==ke.MUTATE_EVENT)return V();if(Y==ke.ERROR_REVALIDATE_EVENT)return V(ue)}});return $.current=!1,j.current=d,O.current=!0,U({_k:F}),C&&(A(ne)||Fe?P():gr(P)),()=>{$.current=!0,k()}},[d]),at(()=>{let P;function S(){const k=de(p)?p(K().data):p;k&&P!==-1&&(P=setTimeout(M,k))}function M(){!K().error&&(x||D().isVisible())&&(u||D().isOnline())?V(dt).then(S):S()}return S(),()=>{P&&(clearTimeout(P),P=-1)}},[p,x,u,d]),L.useDebugValue(z),o&&A(ne)&&d){if(!It&&Fe)throw new Error("Fallback data is required when using Suspense in SSR.");N.current=t,y.current=n,$.current=!1;const P=b[d];if(!A(P)){const S=re(P);ut(S)}if(A(f)){const S=V(dt);A(z)||(S.status="fulfilled",S.value=!0),ut(S)}else throw f}return{mutate:re,get data(){return W.data=!0,z},get error(){return W.error=!0,f},get isValidating(){return W.isValidating=!0,_},get isLoading(){return W.isLoading=!0,H}}},jr=Ir(Tr),Mr=(...e)=>fetch(...e).then(t=>t.json());function Or({chatUUID:e,leftPannelCollapsed:t,onToggleCollapse:n,navigateTo:r}){const{data:s,isLoading:o}=jr("/api/v1/chats/list",Mr),i=Xn,a=p=>m.jsx("div",{className:"text-gray-500 font-bold my-2",children:p},p),l=()=>{if(!s)return m.jsx("div",{className:"flex flex-grow w-full h-full items-center content-center justify-center",children:m.jsx(Jn,{})});let p=null;return s==null?void 0:s.rows.flatMap(x=>{const u=new Date;let c=null;return An(u)?p!=="Today"&&(c=a("Today"),p="Today"):Tn(u)?p!=="Yesterday"&&(c=a("Yesterday"),p="Yesterday"):jn(u)&&p!=="Previous 7 Days"&&(c=a("Previous 7 Days"),p="Previous 7 Days"),[c,m.jsx(i,{chat:x,isSelected:x.uuid===e,navigateTo:r},`chat_${x.uuid}`)].filter(Boolean)})};return m.jsx("div",{className:"flex flex-col gap-0 h-full relative w-full",children:m.jsx("div",{className:"flex flex-col flex-grow gap-1 overflow-y-auto pl-2 pr-2 relative w-full max-w-full",children:!o&&l()})})}const{createElement:je,createContext:kr,createRef:Eo,forwardRef:rn,useCallback:ee,useContext:on,useEffect:Ee,useImperativeHandle:sn,useLayoutEffect:$r,useMemo:Vr,useRef:te,useState:Ie}=Gt,jt=Gt[`useId${Math.random()}`.slice(0,5)],Hr=$r,Ze=kr(null);Ze.displayName="PanelGroupContext";const be=Hr,Fr=typeof jt=="function"?jt:()=>null;let Wr=0;function Nt(e=null){const t=Fr(),n=te(e||t||null);return n.current===null&&(n.current=""+Wr++),e??n.current}function an({children:e,className:t="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:o,id:i,maxSize:a,minSize:l,onCollapse:p,onExpand:x,onResize:u,order:c,style:g,tagName:h="div",...v}){const b=on(Ze);if(b===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:d,expandPanel:F,getPanelSize:O,getPanelStyle:$,groupId:j,isPanelCollapsed:N,reevaluatePanelConstraints:y,registerPanel:D,resizePanel:q,unregisterPanel:K}=b,U=Nt(i),T=te({callbacks:{onCollapse:p,onExpand:x,onResize:u},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:a,minSize:l},id:U,idIsFromProps:i!==void 0,order:c});te({didLogMissingDefaultSizeWarning:!1}),be(()=>{const{callbacks:W,constraints:B}=T.current,X={...B};T.current.id=U,T.current.idIsFromProps=i!==void 0,T.current.order=c,W.onCollapse=p,W.onExpand=x,W.onResize=u,B.collapsedSize=n,B.collapsible=r,B.defaultSize=s,B.maxSize=a,B.minSize=l,(X.collapsedSize!==B.collapsedSize||X.collapsible!==B.collapsible||X.maxSize!==B.maxSize||X.minSize!==B.minSize)&&y(T.current,X)}),be(()=>{const W=T.current;return D(W),()=>{K(W)}},[c,U,D,K]),sn(o,()=>({collapse:()=>{d(T.current)},expand:W=>{F(T.current,W)},getId(){return U},getSize(){return O(T.current)},isCollapsed(){return N(T.current)},isExpanded(){return!N(T.current)},resize:W=>{q(T.current,W)}}),[d,F,O,N,U,q]);const G=$(T.current,s);return je(h,{...v,children:e,className:t,id:i,style:{...G,...g},"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-group-id":j,"data-panel-id":U,"data-panel-size":parseFloat(""+G.flexGrow).toFixed(1)})}const ln=rn((e,t)=>je(an,{...e,forwardedRef:t}));an.displayName="Panel";ln.displayName="forwardRef(Panel)";let bt=null,we=null;function Br(e,t){if(t){const n=(t&pn)!==0,r=(t&gn)!==0,s=(t&mn)!==0,o=(t&hn)!==0;if(n)return s?"se-resize":o?"ne-resize":"e-resize";if(r)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Gr(){we!==null&&(document.head.removeChild(we),bt=null,we=null)}function ft(e,t){const n=Br(e,t);bt!==n&&(bt=n,we===null&&(we=document.createElement("style"),document.head.appendChild(we)),we.innerHTML=`*{cursor: ${n}!important;}`)}function cn(e){return e.type==="keydown"}function un(e){return e.type.startsWith("pointer")}function dn(e){return e.type.startsWith("mouse")}function Qe(e){if(un(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(dn(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function qr(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Ur(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function Kr(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:kt(e),b:kt(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;R(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:Ot(Mt(n.a)),b:Ot(Mt(n.b))};if(s.a===s.b){const o=r.childNodes,i={a:n.a.at(-1),b:n.b.at(-1)};let a=o.length;for(;a--;){const l=o[a];if(l===i.a)return 1;if(l===i.b)return-1}}return Math.sign(s.a-s.b)}const Xr=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Jr(e){var t;const n=getComputedStyle((t=fn(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function Yr(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||Jr(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||Xr.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function Mt(e){let t=e.length;for(;t--;){const n=e[t];if(R(n,"Missing node"),Yr(n))return n}return null}function Ot(e){return e&&Number(getComputedStyle(e).zIndex)||0}function kt(e){const t=[];for(;e;)t.push(e),e=fn(e);return t}function fn(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const pn=1,gn=2,mn=4,hn=8,Zr=qr()==="coarse";let ae=[],Ae=!1,he=new Map,et=new Map;const We=new Set;function Qr(e,t,n,r,s){var o;const{ownerDocument:i}=t,a={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:s},l=(o=he.get(i))!==null&&o!==void 0?o:0;return he.set(i,l+1),We.add(a),Xe(),function(){var x;et.delete(e),We.delete(a);const u=(x=he.get(i))!==null&&x!==void 0?x:1;if(he.set(i,u-1),Xe(),u===1&&he.delete(i),ae.includes(a)){const c=ae.indexOf(a);c>=0&&ae.splice(c,1),Lt(),s("up",!0,null)}}}function $t(e){const{target:t}=e,{x:n,y:r}=Qe(e);Ae=!0,Pt({target:t,x:n,y:r}),Xe(),ae.length>0&&(Je("down",e),e.preventDefault(),e.stopPropagation())}function $e(e){const{x:t,y:n}=Qe(e);if(Ae&&e.buttons===0&&(Ae=!1,Je("up",e)),!Ae){const{target:r}=e;Pt({target:r,x:t,y:n})}Je("move",e),Lt(),ae.length>0&&e.preventDefault()}function Pe(e){const{target:t}=e,{x:n,y:r}=Qe(e);et.clear(),Ae=!1,ae.length>0&&e.preventDefault(),Je("up",e),Pt({target:t,x:n,y:r}),Lt(),Xe()}function Pt({target:e,x:t,y:n}){ae.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),We.forEach(s=>{const{element:o,hitAreaMargins:i}=s,a=o.getBoundingClientRect(),{bottom:l,left:p,right:x,top:u}=a,c=Zr?i.coarse:i.fine;if(t>=p-c&&t<=x+c&&n>=u-c&&n<=l+c){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&Kr(r,o)>0){let h=r,v=!1;for(;h&&!h.contains(o);){if(Ur(h.getBoundingClientRect(),a)){v=!0;break}h=h.parentElement}if(v)return}ae.push(s)}})}function pt(e,t){et.set(e,t)}function Lt(){let e=!1,t=!1;ae.forEach(r=>{const{direction:s}=r;s==="horizontal"?e=!0:t=!0});let n=0;et.forEach(r=>{n|=r}),e&&t?ft("intersection",n):e?ft("horizontal",n):t?ft("vertical",n):Gr()}function Xe(){he.forEach((e,t)=>{const{body:n}=t;n.removeEventListener("contextmenu",Pe),n.removeEventListener("pointerdown",$t),n.removeEventListener("pointerleave",$e),n.removeEventListener("pointermove",$e)}),window.removeEventListener("pointerup",Pe),window.removeEventListener("pointercancel",Pe),We.size>0&&(Ae?(ae.length>0&&he.forEach((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("contextmenu",Pe),n.addEventListener("pointerleave",$e),n.addEventListener("pointermove",$e))}),window.addEventListener("pointerup",Pe),window.addEventListener("pointercancel",Pe)):he.forEach((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("pointerdown",$t,{capture:!0}),n.addEventListener("pointermove",$e))}))}function Je(e,t){We.forEach(n=>{const{setResizeHandlerState:r}=n,s=ae.includes(n);r(e,s,t)})}function eo(){const[e,t]=Ie(0);return ee(()=>t(n=>n+1),[])}function R(e,t){if(!e)throw console.error(t),Error(t)}const Dt=10;function ze(e,t,n=Dt){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function ge(e,t,n=Dt){return ze(e,t,n)===0}function oe(e,t,n){return ze(e,t,n)===0}function to(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const s=e[r],o=t[r];if(!oe(s,o,n))return!1}return!0}function _e({panelConstraints:e,panelIndex:t,size:n}){const r=e[t];R(r!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:s=0,collapsible:o,maxSize:i=100,minSize:a=0}=r;if(ze(n,a)<0)if(o){const l=(s+a)/2;ze(n,l)<0?n=s:n=a}else n=a;return n=Math.min(i,n),n=parseFloat(n.toFixed(Dt)),n}function Ve({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:o}){if(oe(e,0))return t;const i=[...t],[a,l]=r;R(a!=null,"Invalid first pivot index"),R(l!=null,"Invalid second pivot index");let p=0;if(o==="keyboard"){{const u=e<0?l:a,c=n[u];R(c,`Panel constraints not found for index ${u}`);const{collapsedSize:g=0,collapsible:h,minSize:v=0}=c;if(h){const b=t[u];if(R(b!=null,`Previous layout not found for panel index ${u}`),oe(b,g)){const d=v-b;ze(d,Math.abs(e))>0&&(e=e<0?0-d:d)}}}{const u=e<0?a:l,c=n[u];R(c,`No panel constraints found for index ${u}`);const{collapsedSize:g=0,collapsible:h,minSize:v=0}=c;if(h){const b=t[u];if(R(b!=null,`Previous layout not found for panel index ${u}`),oe(b,v)){const d=b-g;ze(d,Math.abs(e))>0&&(e=e<0?0-d:d)}}}}{const u=e<0?1:-1;let c=e<0?l:a,g=0;for(;;){const v=t[c];R(v!=null,`Previous layout not found for panel index ${c}`);const d=_e({panelConstraints:n,panelIndex:c,size:100})-v;if(g+=d,c+=u,c<0||c>=n.length)break}const h=Math.min(Math.abs(e),Math.abs(g));e=e<0?0-h:h}{let c=e<0?a:l;for(;c>=0&&c<n.length;){const g=Math.abs(e)-Math.abs(p),h=t[c];R(h!=null,`Previous layout not found for panel index ${c}`);const v=h-g,b=_e({panelConstraints:n,panelIndex:c,size:v});if(!oe(h,b)&&(p+=h-b,i[c]=b,p.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?c--:c++}}if(to(s,i))return s;{const u=e<0?l:a,c=t[u];R(c!=null,`Previous layout not found for panel index ${u}`);const g=c+p,h=_e({panelConstraints:n,panelIndex:u,size:g});if(i[u]=h,!oe(h,g)){let v=g-h,d=e<0?l:a;for(;d>=0&&d<n.length;){const F=i[d];R(F!=null,`Previous layout not found for panel index ${d}`);const O=F+v,$=_e({panelConstraints:n,panelIndex:d,size:O});if(oe(F,$)||(v-=$-F,i[d]=$),oe(v,0))break;e>0?d--:d++}}}const x=i.reduce((u,c)=>c+u,0);return oe(x,100)?i:s}function no({layout:e,panelsArray:t,pivotIndices:n}){let r=0,s=100,o=0,i=0;const a=n[0];R(a!=null,"No pivot index found"),t.forEach((u,c)=>{const{constraints:g}=u,{maxSize:h=100,minSize:v=0}=g;c===a?(r=v,s=h):(o+=v,i+=h)});const l=Math.min(s,100-o),p=Math.max(r,100-i),x=e[a];return{valueMax:l,valueMin:p,valueNow:x}}function Be(e,t=document){return Array.from(t.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function xn(e,t,n=document){const s=Be(e,n).findIndex(o=>o.getAttribute("data-panel-resize-handle-id")===t);return s??null}function vn(e,t,n){const r=xn(e,t,n);return r!=null?[r,r+1]:[-1,-1]}function yn(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const r=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return r||null}function tt(e,t=document){const n=t.querySelector(`[data-panel-resize-handle-id="${e}"]`);return n||null}function ro(e,t,n,r=document){var s,o,i,a;const l=tt(t,r),p=Be(e,r),x=l?p.indexOf(l):-1,u=(s=(o=n[x])===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:null,c=(i=(a=n[x+1])===null||a===void 0?void 0:a.id)!==null&&i!==void 0?i:null;return[u,c]}function oo({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:r,panelDataArray:s,panelGroupElement:o,setLayout:i}){te({didWarnAboutMissingResizeHandle:!1}),be(()=>{if(!o)return;const a=Be(n,o);for(let l=0;l<s.length-1;l++){const{valueMax:p,valueMin:x,valueNow:u}=no({layout:r,panelsArray:s,pivotIndices:[l,l+1]}),c=a[l];if(c!=null){const g=s[l];R(g,`No panel data found for index "${l}"`),c.setAttribute("aria-controls",g.id),c.setAttribute("aria-valuemax",""+Math.round(p)),c.setAttribute("aria-valuemin",""+Math.round(x)),c.setAttribute("aria-valuenow",u!=null?""+Math.round(u):"")}}return()=>{a.forEach((l,p)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,r,s,o]),Ee(()=>{if(!o)return;const a=t.current;R(a,"Eager values not found");const{panelDataArray:l}=a,p=yn(n,o);R(p!=null,`No group found for id "${n}"`);const x=Be(n,o);R(x,`No resize handles found for group id "${n}"`);const u=x.map(c=>{const g=c.getAttribute("data-panel-resize-handle-id");R(g,"Resize handle element has no handle id attribute");const[h,v]=ro(n,g,l,o);if(h==null||v==null)return()=>{};const b=d=>{if(!d.defaultPrevented)switch(d.key){case"Enter":{d.preventDefault();const F=l.findIndex(O=>O.id===h);if(F>=0){const O=l[F];R(O,`No panel data found for index ${F}`);const $=r[F],{collapsedSize:j=0,collapsible:N,minSize:y=0}=O.constraints;if($!=null&&N){const D=Ve({delta:oe($,j)?y-j:j-$,initialLayout:r,panelConstraints:l.map(q=>q.constraints),pivotIndices:vn(n,g,o),prevLayout:r,trigger:"keyboard"});r!==D&&i(D)}}break}}};return c.addEventListener("keydown",b),()=>{c.removeEventListener("keydown",b)}});return()=>{u.forEach(c=>c())}},[o,e,t,n,r,s,i])}function Vt(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Sn(e,t){const n=e==="horizontal",{x:r,y:s}=Qe(t);return n?r:s}function so(e,t,n,r,s){const o=n==="horizontal",i=tt(t,s);R(i,`No resize handle element found for id "${t}"`);const a=i.getAttribute("data-panel-group-id");R(a,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=r;const p=Sn(n,e),x=yn(a,s);R(x,`No group element found for id "${a}"`);const u=x.getBoundingClientRect(),c=o?u.width:u.height;return(p-l)/c*100}function io(e,t,n,r,s,o){if(cn(e)){const i=n==="horizontal";let a=0;e.shiftKey?a=100:s!=null?a=s:a=10;let l=0;switch(e.key){case"ArrowDown":l=i?0:a;break;case"ArrowLeft":l=i?-a:0;break;case"ArrowRight":l=i?a:0;break;case"ArrowUp":l=i?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return r==null?0:so(e,t,n,r,o)}function ao({panelDataArray:e}){const t=Array(e.length),n=e.map(o=>o.constraints);let r=0,s=100;for(let o=0;o<e.length;o++){const i=n[o];R(i,`Panel constraints not found for index ${o}`);const{defaultSize:a}=i;a!=null&&(r++,t[o]=a,s-=a)}for(let o=0;o<e.length;o++){const i=n[o];R(i,`Panel constraints not found for index ${o}`);const{defaultSize:a}=i;if(a!=null)continue;const l=e.length-r,p=s/l;r++,t[o]=p,s-=p}return t}function Le(e,t,n){t.forEach((r,s)=>{const o=e[s];R(o,`Panel data not found for index ${s}`);const{callbacks:i,constraints:a,id:l}=o,{collapsedSize:p=0,collapsible:x}=a,u=n[l];if(u==null||r!==u){n[l]=r;const{onCollapse:c,onExpand:g,onResize:h}=i;h&&h(r,u),x&&(c||g)&&(g&&(u==null||ge(u,p))&&!ge(r,p)&&g(),c&&(u==null||!ge(u,p))&&ge(r,p)&&c())}})}function Ke(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function lo({defaultSize:e,dragState:t,layout:n,panelData:r,panelIndex:s,precision:o=3}){const i=n[s];let a;return i==null?a=e!=null?e.toPrecision(o):"1":r.length===1?a="1":a=i.toPrecision(o),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function co(e,t=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...s)},t)}}function Ht(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function wn(e){return`react-resizable-panels:${e}`}function En(e){return e.map(t=>{const{constraints:n,id:r,idIsFromProps:s,order:o}=t;return s?r:o?`${o}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function bn(e,t){try{const n=wn(e),r=t.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function uo(e,t,n){var r,s;const o=(r=bn(e,n))!==null&&r!==void 0?r:{},i=En(t);return(s=o[i])!==null&&s!==void 0?s:null}function fo(e,t,n,r,s){var o;const i=wn(e),a=En(t),l=(o=bn(e,s))!==null&&o!==void 0?o:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(i,JSON.stringify(l))}catch(p){console.error(p)}}function Ft({layout:e,panelConstraints:t}){const n=[...e],r=n.reduce((o,i)=>o+i,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(o=>`${o}%`).join(", ")}`);if(!oe(r,100)&&n.length>0)for(let o=0;o<t.length;o++){const i=n[o];R(i!=null,`No layout data found for index ${o}`);const a=100/r*i;n[o]=a}let s=0;for(let o=0;o<t.length;o++){const i=n[o];R(i!=null,`No layout data found for index ${o}`);const a=_e({panelConstraints:t,panelIndex:o,size:i});i!=a&&(s+=i-a,n[o]=a)}if(!oe(s,0))for(let o=0;o<t.length;o++){const i=n[o];R(i!=null,`No layout data found for index ${o}`);const a=i+s,l=_e({panelConstraints:t,panelIndex:o,size:a});if(i!==l&&(s-=l-i,n[o]=l,oe(s,0)))break}return n}const po=100,He={getItem:e=>(Ht(He),He.getItem(e)),setItem:(e,t)=>{Ht(He),He.setItem(e,t)}},Wt={};function zn({autoSaveId:e=null,children:t,className:n="",direction:r,forwardedRef:s,id:o=null,onLayout:i=null,keyboardResizeBy:a=null,storage:l=He,style:p,tagName:x="div",...u}){const c=Nt(o),g=te(null),[h,v]=Ie(null),[b,d]=Ie([]),F=eo(),O=te({}),$=te(new Map),j=te(0),N=te({autoSaveId:e,direction:r,dragState:h,id:c,keyboardResizeBy:a,onLayout:i,storage:l}),y=te({layout:b,panelDataArray:[],panelDataArrayChanged:!1});te({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),sn(s,()=>({getId:()=>N.current.id,getLayout:()=>{const{layout:f}=y.current;return f},setLayout:f=>{const{onLayout:E}=N.current,{layout:z,panelDataArray:C}=y.current,w=Ft({layout:f,panelConstraints:C.map(_=>_.constraints)});Vt(z,w)||(d(w),y.current.layout=w,E&&E(w),Le(C,w,O.current))}}),[]),be(()=>{N.current.autoSaveId=e,N.current.direction=r,N.current.dragState=h,N.current.id=c,N.current.onLayout=i,N.current.storage=l}),oo({committedValuesRef:N,eagerValuesRef:y,groupId:c,layout:b,panelDataArray:y.current.panelDataArray,setLayout:d,panelGroupElement:g.current}),Ee(()=>{const{panelDataArray:f}=y.current;if(e){if(b.length===0||b.length!==f.length)return;let E=Wt[e];E==null&&(E=co(fo,po),Wt[e]=E);const z=[...f],C=new Map($.current);E(e,z,C,b,l)}},[e,b,l]),Ee(()=>{});const D=ee(f=>{const{onLayout:E}=N.current,{layout:z,panelDataArray:C}=y.current;if(f.constraints.collapsible){const w=C.map(re=>re.constraints),{collapsedSize:_=0,panelSize:H,pivotIndices:V}=ye(C,f,z);if(R(H!=null,`Panel size not found for panel "${f.id}"`),!ge(H,_)){$.current.set(f.id,H);const P=De(C,f)===C.length-1?H-_:_-H,S=Ve({delta:P,initialLayout:z,panelConstraints:w,pivotIndices:V,prevLayout:z,trigger:"imperative-api"});Ke(z,S)||(d(S),y.current.layout=S,E&&E(S),Le(C,S,O.current))}}},[]),q=ee((f,E)=>{const{onLayout:z}=N.current,{layout:C,panelDataArray:w}=y.current;if(f.constraints.collapsible){const _=w.map(M=>M.constraints),{collapsedSize:H=0,panelSize:V=0,minSize:re=0,pivotIndices:P}=ye(w,f,C),S=E??re;if(ge(V,H)){const M=$.current.get(f.id),k=M!=null&&M>=S?M:S,ue=De(w,f)===w.length-1?V-k:k-V,I=Ve({delta:ue,initialLayout:C,panelConstraints:_,pivotIndices:P,prevLayout:C,trigger:"imperative-api"});Ke(C,I)||(d(I),y.current.layout=I,z&&z(I),Le(w,I,O.current))}}},[]),K=ee(f=>{const{layout:E,panelDataArray:z}=y.current,{panelSize:C}=ye(z,f,E);return R(C!=null,`Panel size not found for panel "${f.id}"`),C},[]),U=ee((f,E)=>{const{panelDataArray:z}=y.current,C=De(z,f);return lo({defaultSize:E,dragState:h,layout:b,panelData:z,panelIndex:C})},[h,b]),T=ee(f=>{const{layout:E,panelDataArray:z}=y.current,{collapsedSize:C=0,collapsible:w,panelSize:_}=ye(z,f,E);return R(_!=null,`Panel size not found for panel "${f.id}"`),w===!0&&ge(_,C)},[]),G=ee(f=>{const{layout:E,panelDataArray:z}=y.current,{collapsedSize:C=0,collapsible:w,panelSize:_}=ye(z,f,E);return R(_!=null,`Panel size not found for panel "${f.id}"`),!w||ze(_,C)>0},[]),W=ee(f=>{const{panelDataArray:E}=y.current;E.push(f),E.sort((z,C)=>{const w=z.order,_=C.order;return w==null&&_==null?0:w==null?-1:_==null?1:w-_}),y.current.panelDataArrayChanged=!0,F()},[F]);be(()=>{if(y.current.panelDataArrayChanged){y.current.panelDataArrayChanged=!1;const{autoSaveId:f,onLayout:E,storage:z}=N.current,{layout:C,panelDataArray:w}=y.current;let _=null;if(f){const V=uo(f,w,z);V&&($.current=new Map(Object.entries(V.expandToSizes)),_=V.layout)}_==null&&(_=ao({panelDataArray:w}));const H=Ft({layout:_,panelConstraints:w.map(V=>V.constraints)});Vt(C,H)||(d(H),y.current.layout=H,E&&E(H),Le(w,H,O.current))}}),be(()=>{const f=y.current;return()=>{f.layout=[]}},[]);const B=ee(f=>{let E=!1;const z=g.current;return z&&window.getComputedStyle(z,null).getPropertyValue("direction")==="rtl"&&(E=!0),function(w){w.preventDefault();const _=g.current;if(!_)return()=>null;const{direction:H,dragState:V,id:re,keyboardResizeBy:P,onLayout:S}=N.current,{layout:M,panelDataArray:k}=y.current,{initialLayout:Y}=V??{},ue=vn(re,f,_);let I=io(w,f,H,V,P,_);const J=H==="horizontal";J&&E&&(I=-I);const ie=k.map(Ge=>Ge.constraints),me=Ve({delta:I,initialLayout:Y??M,panelConstraints:ie,pivotIndices:ue,prevLayout:M,trigger:cn(w)?"keyboard":"mouse-or-touch"}),Me=!Ke(M,me);(un(w)||dn(w))&&j.current!=I&&(j.current=I,!Me&&I!==0?J?pt(f,I<0?pn:gn):pt(f,I<0?mn:hn):pt(f,0)),Me&&(d(me),y.current.layout=me,S&&S(me),Le(k,me,O.current))}},[]),X=ee((f,E)=>{const{onLayout:z}=N.current,{layout:C,panelDataArray:w}=y.current,_=w.map(M=>M.constraints),{panelSize:H,pivotIndices:V}=ye(w,f,C);R(H!=null,`Panel size not found for panel "${f.id}"`);const P=De(w,f)===w.length-1?H-E:E-H,S=Ve({delta:P,initialLayout:C,panelConstraints:_,pivotIndices:V,prevLayout:C,trigger:"imperative-api"});Ke(C,S)||(d(S),y.current.layout=S,z&&z(S),Le(w,S,O.current))},[]),Ce=ee((f,E)=>{const{layout:z,panelDataArray:C}=y.current,{collapsedSize:w=0,collapsible:_}=E,{collapsedSize:H=0,collapsible:V,maxSize:re=100,minSize:P=0}=f.constraints,{panelSize:S}=ye(C,f,z);S!=null&&(_&&V&&ge(S,w)?ge(w,H)||X(f,H):S<P?X(f,P):S>re&&X(f,re))},[X]),Q=ee((f,E)=>{const{direction:z}=N.current,{layout:C}=y.current;if(!g.current)return;const w=tt(f,g.current);R(w,`Drag handle element not found for id "${f}"`);const _=Sn(z,E);v({dragHandleId:f,dragHandleRect:w.getBoundingClientRect(),initialCursorPosition:_,initialLayout:C})},[]),Re=ee(()=>{v(null)},[]),Ne=ee(f=>{const{panelDataArray:E}=y.current,z=De(E,f);z>=0&&(E.splice(z,1),delete O.current[f.id],y.current.panelDataArrayChanged=!0,F())},[F]),ce=Vr(()=>({collapsePanel:D,direction:r,dragState:h,expandPanel:q,getPanelSize:K,getPanelStyle:U,groupId:c,isPanelCollapsed:T,isPanelExpanded:G,reevaluatePanelConstraints:Ce,registerPanel:W,registerResizeHandle:B,resizePanel:X,startDragging:Q,stopDragging:Re,unregisterPanel:Ne,panelGroupElement:g.current}),[D,h,r,q,K,U,c,T,G,Ce,W,B,X,Q,Re,Ne]),ne={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return je(Ze.Provider,{value:ce},je(x,{...u,children:t,className:n,id:o,ref:g,style:{...ne,...p},"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":c}))}const Cn=rn((e,t)=>je(zn,{...e,forwardedRef:t}));zn.displayName="PanelGroup";Cn.displayName="forwardRef(PanelGroup)";function De(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function ye(e,t,n){const r=De(e,t),o=r===e.length-1?[r-1,r]:[r,r+1],i=n[r];return{...t.constraints,panelSize:i,pivotIndices:o}}function go({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:r}){Ee(()=>{if(e||n==null||r==null)return;const s=tt(t,r);if(s==null)return;const o=i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{i.preventDefault(),n(i);break}case"F6":{i.preventDefault();const a=s.getAttribute("data-panel-group-id");R(a,`No group element found for id "${a}"`);const l=Be(a,r),p=xn(a,t,r);R(p!==null,`No resize element found for id "${t}"`);const x=i.shiftKey?p>0?p-1:l.length-1:p+1<l.length?p+1:0;l[x].focus();break}}};return s.addEventListener("keydown",o),()=>{s.removeEventListener("keydown",o)}},[r,e,t,n])}function Rn({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:r,id:s,onBlur:o,onDragging:i,onFocus:a,style:l={},tabIndex:p=0,tagName:x="div",...u}){var c,g;const h=te(null),v=te({onDragging:i});Ee(()=>{v.current.onDragging=i});const b=on(Ze);if(b===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:d,groupId:F,registerResizeHandle:O,startDragging:$,stopDragging:j,panelGroupElement:N}=b,y=Nt(s),[D,q]=Ie("inactive"),[K,U]=Ie(!1),[T,G]=Ie(null),W=te({state:D});be(()=>{W.current.state=D}),Ee(()=>{if(n)G(null);else{const Q=O(y);G(()=>Q)}},[n,y,O]);const B=(c=r==null?void 0:r.coarse)!==null&&c!==void 0?c:15,X=(g=r==null?void 0:r.fine)!==null&&g!==void 0?g:5;return Ee(()=>{if(n||T==null)return;const Q=h.current;return R(Q,"Element ref not attached"),Qr(y,Q,d,{coarse:B,fine:X},(Ne,ce,ne)=>{if(ce)switch(Ne){case"down":{q("drag"),R(ne,'Expected event to be defined for "down" action'),$(y,ne);const{onDragging:f}=v.current;f&&f(!0);break}case"move":{const{state:f}=W.current;f!=="drag"&&q("hover"),R(ne,'Expected event to be defined for "move" action'),T(ne);break}case"up":{q("hover"),j();const{onDragging:f}=v.current;f&&f(!1);break}}else q("inactive")})},[B,d,n,X,O,y,T,$,j]),go({disabled:n,handleId:y,resizeHandler:T,panelGroupElement:N}),je(x,{...u,children:e,className:t,id:s,onBlur:()=>{U(!1),o==null||o()},onFocus:()=>{U(!0),a==null||a()},ref:h,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...l},tabIndex:p,"data-panel-group-direction":d,"data-panel-group-id":F,"data-resize-handle":"","data-resize-handle-active":D==="drag"?"pointer":K?"keyboard":void 0,"data-resize-handle-state":D,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":y})}Rn.displayName="PanelResizeHandle";const mo=({className:e,...t})=>m.jsx(Cn,{className:le("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...t}),Bt=ln,ho=({withHandle:e,className:t,...n})=>m.jsx(Rn,{className:le("relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...n,children:e&&m.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm",children:m.jsx(Mn,{className:"h-2.5 w-2.5"})})});function xo(e,t=null,n=null){return{left:{minSize:e?0:100,defaultSize:t||(e?0:100),collapsedSize:0,collapsible:!0},right:{minSize:e?100:0,defaultSize:n||(e?100:0),collapsedSize:0,collapsible:!0}}}function vo(e=null,t=null){return{left:{minSize:18,defaultSize:e||25,collapsedSize:0,collapsible:!0},right:{minSize:60,defaultSize:t||75,collapsible:!0,collapsedSize:60}}}const yo=L.forwardRef(({chatUUID:e,left:t,right:n,leftPannelRef:r,rightPannelRef:s,setLeftCollapsed:o},i)=>{const{isSm:l}=On("sm"),[,p]=L.useState(!1),x=null,u=null,c=xo(e,x,u),g=vo(x,u);console.log("chatId",e),console.log("FRONTEND",null),L.useEffect(()=>{l||(e?(r.current.collapse(),o(!0)):e||(s.current.collapse(),p(!0)))},[l,e,r,s]);const h=()=>{o(r.current.isCollapsed())},v=b=>{console.log("onLayout",b),kn.set("react-resizable-panels-layout",JSON.stringify(b))};return L.useImperativeHandle(i,()=>({leftPannelRef:r.current,rightPannelRef:s.current})),m.jsxs(mo,{direction:"horizontal",className:"",id:"group",onLayout:v,children:[m.jsx(Bt,{onCollapse:h,onExpand:h,ref:r,id:"left-panel",...l?g.left:c.left,order:1,children:m.jsx("div",{className:"flex flex-col h-full bg-base-200 relative",children:t})}),l&&m.jsx(ho,{id:"resize-handle",withHandle:!0}),m.jsx(Bt,{ref:s,id:"right-panel",...l?g.right:c.right,order:2,children:m.jsx("div",{className:"flex h-full items-center justify-center content-center relative",children:n})})]})});function bo({children:e,chatUUID:t=null,navigateTo:n}){const[r,s]=L.useState(!1),o=L.useRef(null),i=L.useRef(null),a=()=>{const l=o.current.isCollapsed();l?o.current.expand():o.current.collapse(),s(!l)};return m.jsx(m.Fragment,{children:m.jsx("div",{className:"flex h-screen",children:m.jsx(yo,{chatUUID:t,leftPannelRef:o,rightPannelRef:i,setLeftCollapsed:s,left:m.jsx(Or,{chatUUID:t,leftPannelCollapsed:r,onToggleCollapse:a,navigateTo:n}),right:e})})})}export{qt as C,bo as a,wr as m,jr as u};
